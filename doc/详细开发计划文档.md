# 高校实习过程跟踪与评价管理系统 - 详细开发计划文档

## 一、项目概述

### 1.1 项目目标
开发一套完整的高校实习过程跟踪与评价管理系统，实现学校、企业、学生三方协同管理实习过程，提供全流程的实习跟踪、评价和管理功能。

### 1.2 开发周期
预计开发周期：**12周（3个月）**

### 1.3 开发团队分工
- **后端开发**：2人
- **前端开发**：2人
- **测试人员**：1人
- **项目经理**：1人

### 1.4 技术选型确认
- **后端**：Spring Boot 2.7.6 + MyBatis Plus + JWT + Redis + Spring Security
- **前端**：Vue 3 + Vite + Element Plus
- **数据库**：MySQL 8
- **缓存**：Redis 6.0+
- **接口文档**：Swagger

## 二、开发阶段划分

### 第一阶段：项目基础搭建（第1-2周）

#### 2.1 环境准备（第1周前3天）
**任务清单：**
1. 搭建开发环境
   - 安装JDK 1.8、Maven 3.6+、Node.js 16+
   - 配置IDE（IDEA、VSCode）
   - 安装MySQL 8、Redis并配置
   - 

2. 项目初始化
   - 创建Spring Boot项目骨架
   - 配置Maven依赖（Spring Boot、MyBatis Plus、JWT、Redis、Spring Security、Swagger）
   - 创建Vue 3项目骨架
   - 配置Vite和基础依赖

3. 项目结构搭建
   - 按照开发规范创建后端包结构
   - 按照开发规范创建前端目录结构
   - 配置代码格式化工具（Prettier、ESLint）

**交付物：**
- 可运行的项目框架
- 项目结构文档
- 环境配置文档

#### 2.2 基础组件开发（第1周后2天 + 第2周前3天）
**任务清单：**
1. 后端基础组件
   - 统一响应结果类（Result）
   - 全局异常处理器（GlobalExceptionHandler）
   - JWT工具类（JwtUtil）
   - Redis工具类（RedisUtil）
   - 安全工具类（SecurityUtil）
   - 常量定义类（Constants）
   - 枚举类定义

2. 前端基础组件
   - HTTP请求封装（axios拦截器）
   - 路由配置和路由守卫
   - 状态管理配置（Vuex/Pinia）
   - 权限工具函数
   - 公共工具函数
   - 布局组件（顶部导航、左侧菜单、主内容区）

3. 配置文件
   - Spring Boot配置文件（application.yml）
   - 数据库连接配置（MySQL 8）
   - Redis连接配置
   - JWT配置
   - Spring Security配置
   - Swagger配置

**交付物：**
- 基础组件代码
- 配置文件
- 基础组件使用文档

#### 2.3 安全认证模块（第2周后2天）
**任务清单：**
1. Spring Security配置
   - SecurityConfig配置类
   - JWT认证过滤器（JwtAuthenticationFilter）
   - JWT授权过滤器（JwtAuthorizationFilter）
   - 认证成功/失败处理器
   - 访问拒绝处理器

2. 用户认证服务
   - UserDetailsService实现
   - 登录接口开发
   - 登出接口开发
   - Token刷新接口开发

3. 前端认证功能
   - 登录页面开发
   - Token存储和管理
   - 请求拦截器添加Token
   - 响应拦截器处理401错误

**交付物：**
- 完整的认证授权功能
- 登录/登出功能可用
- 接口权限控制生效

### 第二阶段：系统管理模块开发（第3-4周）

#### 2.4 数据库设计（第3周第1天）
**任务清单：**
1. 数据库表设计
   - 学校表（school_info）
   - 学院表（college_info）
   - 专业表（major_info）
   - 班级表（class_info，包含分享码字段）
   - 系统配置表（system_config）
   - 学期表（semester_info）

2. 表结构设计要点
   - 所有表添加软删除字段（delete_flag）
   - 所有表添加创建时间、更新时间字段
   - 班级表添加分享码相关字段（share_code、share_code_expire_time、share_code_generate_time）
   - **企业学校合作关系表（enterprise_school_cooperation）**（新增）：
     - 企业ID（enterprise_id）
     - 学校ID（school_id）
     - 合作类型（cooperation_type）
     - 合作状态（cooperation_status）：1-进行中，2-已结束
     - 开始时间（start_time）
     - 结束时间（end_time）
     - 合作描述（cooperation_desc）
     - 唯一索引（enterprise_id + school_id + delete_flag）
   - 建立表之间的外键关系
   - 创建必要的索引

3. 数据库脚本
   - 编写建表SQL脚本
   - 编写初始化数据SQL脚本
   - 编写索引创建脚本

**交付物：**
- 数据库设计文档
- 建表SQL脚本
- 数据库ER图

#### 2.5 学校管理功能（第3周第2-3天）
**任务清单：**
1. 后端开发
   - School实体类（Domain层）
   - SchoolMapper接口（Mapper层）
   - SchoolService接口和实现（Service层）
   - SchoolController控制器（Controller层）
   - 权限控制：仅系统管理员可操作

2. 功能实现
   - 添加学校（参数校验、学校代码唯一性校验）
   - 编辑学校信息
   - 查询学校列表（分页）
   - 查询学校详情
   - 停用学校（软删除）

3. 前端开发
   - 学校列表页面
   - 学校添加/编辑表单页面
   - 学校详情页面
   - 权限控制：仅系统管理员可见

**交付物：**
- 学校管理功能完整可用
- 接口文档更新

#### 2.6 学院管理功能（第3周第4-5天）
**任务清单：**
1. 后端开发
   - College实体类
   - CollegeMapper接口
   - CollegeService接口和实现
   - CollegeController控制器
   - 权限控制：学校管理员只能管理本校学院

2. 功能实现
   - 添加学院（自动关联当前登录管理员的学校）
   - 编辑学院信息
   - 查询学院列表（自动过滤，只显示本校学院）
   - 查询学院详情
   - 停用学院（软删除）
   - 数据权限过滤：查询时自动添加学校ID条件

3. 前端开发
   - 学院列表页面
   - 学院添加/编辑表单页面
   - 学院详情页面
   - 权限控制：学校管理员可见

**交付物：**
- 学院管理功能完整可用
- 数据权限隔离生效

#### 2.7 专业管理功能（第4周第1-2天）
**任务清单：**
1. 后端开发
   - Major实体类
   - MajorMapper接口
   - MajorService接口和实现
   - MajorController控制器
   - 权限控制：学院负责人只能管理本院专业

2. 功能实现
   - 添加专业（自动关联当前登录用户的学院）
   - 编辑专业信息
   - 查询专业列表（自动过滤，只显示本院专业）
   - 查询专业详情
   - 停用专业（软删除）
   - 数据权限过滤：查询时自动添加学院ID条件

3. 前端开发
   - 专业列表页面
   - 专业添加/编辑表单页面
   - 专业详情页面
   - 权限控制：学院负责人可见

**交付物：**
- 专业管理功能完整可用
- 数据权限隔离生效

#### 2.8 班级管理功能（第4周第3-4天）
**任务清单：**
1. 后端开发
   - Class实体类（包含分享码字段）
   - ClassMapper接口
   - ClassService接口和实现
   - ClassController控制器
   - 权限控制：班主任只能管理本班

2. 功能实现
   - 添加班级（自动关联当前登录用户的专业）
   - 编辑班级信息
   - 查询班级列表（自动过滤，只显示本班）
   - 查询班级详情
   - 停用班级（软删除）
   - **班级分享码功能**：
     - 生成分享码（6-8位数字字母组合，唯一性校验）
     - 查看分享码（显示分享码、生成时间、过期时间）
     - 重新生成分享码（旧分享码立即失效）
     - 分享码过期检查（默认30天有效期）
     - 分享码使用统计（统计通过该分享码注册的学生数量）
   - 数据权限过滤：查询时自动添加班级ID条件

3. 前端开发
   - 班级列表页面
   - 班级添加/编辑表单页面
   - 班级详情页面
   - **分享码管理模块**：
     - 分享码显示区域（显示分享码、生成时间、过期时间）
     - 重新生成按钮
     - 复制分享码功能
     - 分享码使用统计显示
   - 权限控制：班主任可见

**交付物：**
- 班级管理功能完整可用
- 班级分享码功能完整可用
- 数据权限隔离生效

#### 2.9 系统配置功能（第4周第5天）
**任务清单：**
1. 后端开发
   - SystemConfig实体类
   - Semester实体类
   - 对应的Mapper、Service、Controller
   - 权限控制：仅系统管理员可操作

2. 功能实现
   - 学期管理（添加、编辑、设置当前学期、唯一性校验）
   - 实习类型定义
   - 评价参数配置
   - 系统通知模板管理

3. 前端开发
   - 系统配置页面
   - 学期管理页面
   - 配置项管理页面

**交付物：**
- 系统配置功能完整可用

### 第三阶段：用户管理模块开发（第5-6周）

#### 2.10 用户角色体系设计（第5周第1天）
**任务清单：**
1. 角色权限设计
   - 定义8种角色及其权限范围
   - 设计权限标识体系
   - 设计数据权限过滤规则

2. 用户表设计
   - 用户基础表（user_info）
   - 学生表（student_info）
   - 教师表（teacher_info）
   - 企业表（enterprise_info）
   - 企业导师表（enterprise_mentor_info）
   - 用户角色关联表（user_role）
   - **企业学校合作关系表（enterprise_school_cooperation）**（新增）

3. 权限表设计
   - 角色表（role_info）
   - 权限表（permission_info）
   - 角色权限关联表（role_permission）

**交付物：**
- 用户权限设计文档
- 用户相关表结构设计
- 权限控制方案文档

#### 2.11 用户注册与添加功能（第5周第2-3天）
**任务清单：**
1. 企业自主注册
   - Enterprise实体类
   - EnterpriseMapper、Service、Controller
   - 注册接口（填写企业资质信息）
   - 企业资质审核功能（学校管理员审核）
   - 审核通过后激活账号

2. 学生注册功能
   - Student实体类
   - StudentMapper、Service、Controller
   - **两种注册方式**：
     - 方式一：班主任Excel批量导入（生成初始账号密码）
     - 方式二：学生自主注册（填写个人信息 + 班级分享码验证）
   - 分享码验证逻辑（验证有效性、过期时间、所属班级）
   - 学生注册审核功能（班主任审核确认）

3. 教师添加功能
   - Teacher实体类
   - TeacherMapper、Service、Controller
   - 学校管理员或学院负责人手动添加教师
   - 分配角色权限功能

4. 班主任任命功能
   - 学院负责人从教师中指定班主任
   - 班主任与班级关联

5. 前端开发
   - 企业注册页面
   - 学生注册页面（包含分享码输入）
   - 学生批量导入页面（Excel上传）
   - 教师添加页面
   - 班主任任命页面

**交付物：**
- 用户注册功能完整可用
- 班级分享码验证功能可用
- 用户添加功能完整可用

#### 2.12 用户管理功能（第5周第4-5天）
**任务清单：**
1. 后端开发
   - User实体类
   - UserMapper、Service、Controller
   - 用户信息查询（根据角色过滤数据）
   - 用户信息编辑
   - 用户状态管理（启用、禁用）
   - 密码重置功能

2. 权限控制实现
   - 系统管理员：可查看所有用户
   - 学校管理员：只能查看本校用户
   - 学院负责人：只能查看本院用户
   - 班主任：只能查看本班学生
   - 其他角色：只能查看个人信息

3. 前端开发
   - 用户列表页面（根据角色显示不同数据）
   - 用户详情页面
   - 用户编辑页面
   - 密码重置页面

**交付物：**
- 用户管理功能完整可用
- 数据权限隔离生效

#### 2.12.1 企业学校合作关系管理（第5周第5天补充）
**任务清单：**
1. 数据库设计
   - 创建企业学校合作关系表（`enterprise_school_cooperation`）
   - 字段：企业ID、学校ID、合作类型、合作状态、开始时间、结束时间、合作描述等
   - 建立唯一索引（企业ID + 学校ID）

2. 后端开发
   - EnterpriseSchoolCooperation实体类
   - EnterpriseSchoolCooperationMapper、Service、Controller
   - 添加合作关系接口（学校管理员或系统管理员）
   - 编辑合作关系接口
   - 查询合作关系列表接口
   - 删除合作关系接口（软删除）
   - 根据企业ID查询合作学校列表接口
   - 根据学校ID查询合作企业列表接口

3. 权限控制
   - 系统管理员：可以管理所有合作关系
   - 学校管理员：只能管理本校的合作关系
   - 企业管理员：只能查看本企业的合作关系（只读）

4. 前端开发
   - 企业管理页面显示合作院校列表
   - 合作关系管理对话框（添加/编辑/删除）
   - 学校管理页面显示合作企业列表（可选）

**交付物：**
- 企业学校合作关系管理功能完整可用
- 企业管理页面可以显示合作院校

#### 2.13 权限控制系统完善（第6周）
**任务清单：**
1. 后端权限控制
   - 完善@PreAuthorize注解使用
   - 实现数据权限过滤逻辑（Service层）
   - 权限变更时更新用户会话
   - 权限缓存机制（Redis）

2. **企业和管理员数据权限优化**（重要）
   - **企业管理数据权限**：
     - 系统管理员：可查看所有企业
     - 学校管理员：只能查看和本校有合作关系的企业（通过合作关系表过滤）
     - 班主任：只能查看和管理的班级有合作关系的企业（通过合作关系表和学生班级关联过滤）
     - 企业管理员：只能查看本企业
   - **企业导师管理数据权限**：
     - 系统管理员：可查看所有企业导师
     - 学校管理员：只能查看和本校有合作关系的企业的导师（通过合作关系表过滤）
     - 班主任：只能查看和管理的班级有合作关系的企业的导师（通过合作关系表和学生班级关联过滤）
     - 企业管理员：只能查看本企业的导师（已实现）

3. 前端权限控制
   - 菜单权限控制（根据角色动态显示）
   - 按钮权限控制（权限指令/组件）
   - 路由权限控制（路由守卫）
   - 数据权限过滤（前端过滤 + 后端验证）

4. 权限测试
   - 各角色权限测试
   - 数据权限隔离测试
   - 越权访问测试

**交付物：**
- 完整的权限控制系统
- 企业和管理员数据权限优化完成
- 权限测试报告

### 第四阶段：实习过程跟踪模块开发（第7-8周）

#### 2.14 实习计划管理（第7周第1-2天）
**任务清单：**
1. 后端开发
   - InternshipPlan实体类
   - InternshipPlanMapper、Service、Controller
   - 权限控制：学校管理员或教务处

2. 功能实现
   - 创建实习计划（实习大纲、时间安排、任务要求、考核标准）
   - 编辑实习计划
   - 查询实习计划列表（按学期、专业筛选）
   - 实习计划审批流程
   - 发布实习计划
   - 历史计划复用功能

3. 前端开发
   - 实习计划列表页面
   - 实习计划创建/编辑页面
   - 实习计划详情页面
   - 审批流程页面

**交付物：**
- 实习计划管理功能完整可用

#### 2.15 岗位管理功能（第7周第3-4天）
**任务清单：**
1. 后端开发
   - InternshipPost实体类
   - InternshipPostMapper、Service、Controller
   - 权限控制：企业管理员

2. 功能实现
   - 发布实习岗位（岗位名称、描述、技能要求、招聘人数、工作地点、实习时间、薪资待遇）
   - 编辑岗位信息
   - 查询岗位列表
   - 岗位审核功能（学校管理员或指定教师审核）
   - 岗位状态管理（待审核、已通过、已拒绝、已关闭）
   - 查看岗位申请情况

3. 前端开发
   - 岗位发布页面
   - 岗位列表页面（企业端：我的岗位，学生端：可申请岗位）
   - 岗位详情页面
   - 岗位审核页面（管理员端）

**交付物：**
- 岗位管理功能完整可用
- 岗位审核流程可用

#### 2.16 双选管理功能（第7周第5天 + 第8周第1天）
**任务清单：**
1. 后端开发
   - InternshipApply实体类
   - InternshipApplyMapper、Service、Controller
   - 权限控制：学生、企业、学校管理员、班主任

2. 功能实现
   - **学生实习企业绑定逻辑**：
     - **方式一：选择合作企业**（推荐）
       - 学生只能选择与所属学校有合作关系的企业（通过合作关系表查询）
       - 显示合作企业列表供学生选择
       - 学生选择企业后，可以选择该企业发布的岗位进行投递
     - **方式二：自主实习**（备选）
       - 如果学生选择自主实习，需要填写企业信息表单
       - 表单字段：企业名称、企业地址、联系人、联系电话、企业性质等
       - 提交后需要班主任或学校管理员审核
       - 审核通过后，学生可以继续实习流程
   - **简历投递限制**：
     - 学生只能向与所属学校有合作关系的企业投递简历
     - 学生只能投递企业发布的岗位（不能投递未发布的岗位）
     - 投递前需要验证：企业是否与学校有合作关系、岗位是否存在且状态为"已发布"
   - 学生申请岗位（提交申请、个人简历、申请说明）
   - 企业查看申请（查看学生申请信息）
   - 企业筛选操作（标记感兴趣、安排面试、录用、拒绝）
   - 学校管理员/班主任查看双选进度
   - 双选协调功能
   - 多轮双选支持
   - 调剂机制

3. 前端开发
   - 学生端：
     - 实习企业绑定页面（选择合作企业或自主实习）
     - 岗位浏览页面（只显示合作企业的岗位）
     - 申请提交页面（只能投递合作企业的岗位）
     - 申请状态查看页面
   - 企业端：申请列表页面、申请详情页面、筛选操作页面
   - 管理员端：双选进度监控页面、协调操作页面

**交付物：**
- 双选管理功能完整可用
- 学生实习企业绑定功能完整可用
- 简历投递限制功能完整可用

#### 2.17 过程记录功能（第8周第2-4天）
**任务清单：**
1. 实习日志功能
   - InternshipLog实体类
   - InternshipLogMapper、Service、Controller
   - 学生提交日志（富文本编辑、附件上传）
   - 指导教师查看和批阅日志
   - 日志列表查询（按时间、学生筛选）

2. 周报功能
   - InternshipWeeklyReport实体类
   - InternshipWeeklyReportMapper、Service、Controller
   - 学生提交周报（富文本编辑、附件上传）
   - 指导教师查看和批阅周报
   - 周报列表查询

3. 考勤记录功能
   - Attendance实体类
   - AttendanceMapper、Service、Controller
   - 企业导师/企业管理员确认考勤（出勤、迟到、早退、请假）
   - 学生查看考勤记录
   - 考勤统计功能

4. 阶段性成果提交
   - 成果提交实体类
   - 学生上传工作成果、项目文档
   - 指导教师查看成果

5. 问题反馈与指导
   - InternshipFeedback实体类
   - InternshipFeedbackMapper、Service、Controller
   - 学生提交问题反馈
   - 教师和导师给予指导建议
   - 反馈列表和详情查看

6. 前端开发
   - 学生端：日志提交页面、周报提交页面、考勤查看页面、成果提交页面、反馈提交页面
   - 教师端：日志批阅页面、周报批阅页面、反馈处理页面
   - 企业端：考勤确认页面

**交付物：**
- 过程记录功能完整可用
- 所有过程记录功能测试通过

### 第五阶段：评价管理模块开发（第9周）

#### 2.18 评价指标体系（第9周第1-2天）
**任务清单：**
1. 后端开发
   - EvaluationIndex实体类（评价指标）
   - EvaluationIndexMapper、Service、Controller
   - 评价指标配置功能（支持自定义指标、权重、评分标准）

2. 功能实现
   - 企业评价指标（工作态度、专业知识应用、专业技能、团队协作、创新意识等）
   - 学校评价指标（实习报告质量、过程表现、成果展示、总结反思等）
   - 学生自评指标
   - 互评指标（可选）
   - 指标权重配置
   - 评分标准配置

3. 前端开发
   - 评价指标配置页面（管理员端）
   - 指标列表和详情页面

**交付物：**
- 评价指标体系功能完整可用

#### 2.19 评价流程实现（第9周第3-4天）
**任务清单：**
1. 后端开发
   - EnterpriseEvaluation实体类（企业评价）
   - SchoolEvaluation实体类（学校评价）
   - SelfEvaluation实体类（学生自评）
   - 对应的Mapper、Service、Controller

2. 功能实现
   - **企业评价**：
     - 企业导师填写工作表现评价
     - 评价指标打分
     - 评价意见填写
   - **学校评价**：
     - 学校指导教师填写学习成果评价
     - 评价指标打分
     - 评价意见填写
   - **学生自评**：
     - 学生填写自我评价
     - 自我反思和总结
   - **互评功能**（可选）：
     - 同学间相互评价
   - **评价阶段管理**：
     - 初期目标设定评价
     - 过程中形成性评价
     - 结束后总结性评价

3. 前端开发
   - 企业端：评价填写页面
   - 教师端：评价填写页面
   - 学生端：自评填写页面、评价查看页面

**交付物：**
- 评价流程功能完整可用

#### 2.20 成绩综合计算（第9周第5天）
**任务清单：**
1. 后端开发
   - ComprehensiveScore实体类（综合成绩）
   - ComprehensiveScoreMapper、Service、Controller
   - 成绩计算算法（可配置权重）
   - 自动汇总生成综合评价

2. 功能实现
   - 权重配置（企业评价、学校评价、自评互评权重）
   - 加权总分计算
   - 标准化成绩报告生成
   - 评价结果统计分析（班级平均分、专业分布、企业评价对比等）

3. 前端开发
   - 成绩查看页面（学生端、教师端、管理员端）
   - 成绩统计页面（图表展示）
   - 成绩报表页面

**交付物：**
- 成绩综合计算功能完整可用
- 成绩统计分析功能可用

### 第六阶段：校企协同模块开发（第10周）

#### 2.21 信息共享平台（第10周第1-2天）
**任务清单：**
1. 后端开发
   - InformationShare实体类
   - InformationShareMapper、Service、Controller
   - 权限控制：学校、企业

2. 功能实现
   - 学校发布信息（实习教学要求、人才培养目标、合作政策等）
   - 企业发布信息（人才需求、项目合作意向、技术分享等）
   - 信息分类管理
   - 权限控制（按角色、按范围）
   - 版本记录功能

3. 前端开发
   - 信息发布页面
   - 信息列表页面（分类展示）
   - 信息详情页面

**交付物：**
- 信息共享平台功能完整可用

#### 2.22 沟通机制（第10周第3-4天）
**任务清单：**
1. 站内信系统
   - Message实体类
   - MessageMapper、Service、Controller
   - 点对点通信
   - 群组通信
   - 消息已读/未读状态
   - 消息列表和详情

2. 通知公告系统
   - Notice实体类
   - NoticeMapper、Service、Controller
   - 重要信息发布
   - 按角色、按范围精准推送
   - 通知列表和详情

3. 讨论区功能
   - Discussion实体类
   - DiscussionMapper、Service、Controller
   - 话题创建和讨论
   - 经验分享和问题讨论
   - 沟通历史记录

4. 前端开发
   - 站内信页面（收件箱、发件箱、写消息）
   - 通知公告页面
   - 讨论区页面

**交付物：**
- 沟通机制功能完整可用

#### 2.23 资源管理功能（第10周第5天）
**任务清单：**
1. 后端开发
   - EnterpriseLibrary实体类（企业库）
   - InternshipBase实体类（实习基地）
   - 对应的Mapper、Service、Controller

2. 功能实现
   - 企业库管理（企业资质、业务范围、合作历史、评价反馈）
   - 企业分级分类管理
   - 实习基地管理（设备条件、接待能力、指导力量）
   - 资源评价系统（学校和学生对合作企业的反馈）
   - 企业信用评价体系

3. 前端开发
   - 企业库页面
   - 实习基地管理页面
   - 资源评价页面

**交付物：**
- 资源管理功能完整可用

### 第七阶段：数据统计与分析模块开发（第11周）

#### 2.24 实习数据看板（第11周第1-2天）
**任务清单：**
1. 后端开发
   - 统计数据查询接口
   - 数据聚合计算
   - 权限过滤（根据角色返回不同范围的数据）

2. 功能实现
   - 实习分布地图数据
   - 进度完成率统计
   - 评价分数统计
   - 时间趋势数据
   - 多维度数据筛选（时间范围、数据类型等）

3. 前端开发
   - 数据看板页面
   - 统计图表组件（地图、饼图、柱状图、折线图）
   - 数据筛选组件
   - 不同角色显示不同的看板内容

**交付物：**
- 实习数据看板功能完整可用

#### 2.25 质量分析功能（第11周第3天）
**任务清单：**
1. 后端开发
   - 质量分析算法
   - 多维度对比分析（历史数据、专业差异、企业类型等）
   - 异常情况识别
   - 改进建议生成

2. 功能实现
   - 实习质量整体状况分析
   - 变化趋势分析
   - 异常预警
   - 改进建议
   - 数据钻取功能（从总体到个体）

3. 前端开发
   - 质量分析页面
   - 分析结果可视化
   - 数据钻取交互

**交付物：**
- 质量分析功能完整可用

#### 2.26 报表生成功能（第11周第4-5天）
**任务清单：**
1. 后端开发
   - 报表模板定义
   - 报表数据查询和组装
   - Excel导出功能
   - PDF导出功能
   - 定时任务支持（定期自动生成报表）

2. 功能实现
   - 实习情况汇总表
   - 评价成绩统计表
   - 企业合作情况表
   - 教学质量分析报告
   - 报表参数配置（时间范围、数据维度等）
   - 报表导出（Excel、PDF格式）

3. 前端开发
   - 报表生成页面
   - 报表模板选择
   - 报表参数配置
   - 报表下载功能

**交付物：**
- 报表生成功能完整可用

### 第八阶段：测试与优化（第12周）

#### 2.27 功能测试（第12周第1-2天）
**任务清单：**
1. 单元测试
   - Service层方法单元测试
   - 测试覆盖率要求70%以上

2. 接口测试
   - 所有接口功能测试
   - 正常流程测试
   - 异常流程测试
   - 边界条件测试

3. 集成测试
   - 模块间集成测试
   - 业务流程端到端测试

4. 权限测试
   - 各角色权限测试
   - 数据权限隔离测试
   - 越权访问测试

5. 前端测试
   - 页面功能测试
   - 交互测试
   - 兼容性测试（浏览器、设备）

**交付物：**
- 测试用例文档
- 测试报告
- Bug修复记录

#### 2.28 性能优化（第12周第3天）
**任务清单：**
1. 数据库优化
   - 索引优化
   - 查询语句优化
   - 避免N+1查询问题

2. 缓存优化
   - Redis缓存策略优化
   - 缓存命中率提升
   - 缓存更新策略优化

3. 前端优化
   - 路由懒加载
   - 图片懒加载
   - 代码分割和压缩
   - 首屏加载优化

4. 接口优化
   - 响应时间优化
   - 并发处理优化
   - 接口限流配置

**交付物：**
- 性能优化报告
- 性能测试数据

#### 2.29 安全加固（第12周第4天）
**任务清单：**
1. 安全漏洞检查
   - SQL注入防护检查
   - XSS防护检查
   - CSRF防护检查
   - 敏感信息泄露检查

2. 安全加固
   - 密码加密强度检查
   - Token安全配置检查
   - 接口权限检查
   - 数据权限检查

3. 安全测试
   - 渗透测试
   - 权限绕过测试
   - 数据泄露测试

**交付物：**
- 安全测试报告
- 安全加固文档

#### 2.30 文档完善与部署准备（第12周第5天）
**任务清单：**
1. 文档完善
   - API接口文档完善（使用Swagger生成）
   - 数据库设计文档完善
   - 部署文档编写
   - 用户操作手册编写
   - 运维文档编写

2. 部署准备
   - 生产环境配置准备
   - 数据库脚本准备
   - 部署脚本编写
   - 备份方案制定

3. 上线准备
   - 上线检查清单
   - 回滚方案制定
   - 监控方案制定

**交付物：**
- 完整项目文档
- 部署方案文档
- 上线准备文档

## 三、关键功能开发要点

### 3.1 班级分享码功能开发要点

#### 3.1.1 数据库设计
- 班级表添加字段：
  - `share_code` VARCHAR(8)：分享码（6-8位）
  - `share_code_expire_time` DATETIME：分享码过期时间
  - `share_code_generate_time` DATETIME：分享码生成时间
  - `share_code_use_count` INT：分享码使用次数

#### 3.1.2 后端开发要点
1. 分享码生成逻辑
   - 生成6-8位随机字符串（数字+字母）
   - 确保系统范围内唯一性
   - 设置默认30天有效期
   - 记录生成时间

2. 分享码验证逻辑
   - 验证分享码是否存在
   - 验证分享码是否过期
   - 验证分享码所属班级
   - 验证通过后关联学生与班级

3. 分享码管理接口
   - 查看分享码接口（班主任权限）
   - 重新生成分享码接口（班主任权限）
   - 分享码使用统计接口

4. Redis缓存
   - 缓存分享码信息：`class:share_code:{classId}`
   - 缓存分享码使用记录：`class:share_code:usage:{shareCode}`

#### 3.1.3 前端开发要点
1. 分享码显示模块
   - 显示分享码内容
   - 显示生成时间和过期时间
   - 显示剩余有效天数
   - 显示使用统计

2. 分享码操作
   - 复制分享码功能
   - 重新生成按钮（带确认提示）
   - 重新生成后旧分享码立即失效提示

3. 学生注册页面
   - 分享码输入框
   - 实时验证提示
   - 验证失败错误提示（分享码错误、已过期、不存在）

### 3.1 代码质量开发要点

#### 3.1.1 控制流嵌套规范
1. **嵌套层级限制**
   - 方法/函数中的 if/else 嵌套层级不应超过 3 层
   - 当嵌套层级超过 3 层时，必须提取为私有方法/函数
   - 优先使用提前返回（Early Return）模式，减少嵌套

2. **优化技巧**
   - **提取方法**：将复杂逻辑提取为独立的私有方法
   - **提前返回**：使用卫语句（Guard Clauses）处理异常情况
   - **策略模式**：对于复杂的条件判断，考虑使用策略模式

3. **示例对比**
   ```java
   // ❌ 错误示例：嵌套层级过深
   public Page<Class> getClassPage(...) {
       if (schoolId != null) {
           List<College> colleges = ...;
           if (colleges != null && !colleges.isEmpty()) {
               List<Long> collegeIds = ...;
               List<Major> majors = ...;
               if (majors != null && !majors.isEmpty()) {
                   // 4层嵌套
               }
           }
       }
   }
   
   // ✅ 正确示例：提取方法，减少嵌套
   public Page<Class> getClassPage(...) {
       LambdaQueryWrapper<Class> wrapper = new LambdaQueryWrapper<>();
       applyOrgFilter(wrapper, schoolId, collegeId, majorId);
       applyDataPermissionFilter(wrapper);
       return this.page(page, wrapper);
   }
   ```

#### 3.1.2 方法/函数长度规范
1. **长度限制**
   - 单个方法/函数代码行数不应超过 80 行
   - 当方法/函数过长时，应提取为多个私有方法/函数

2. **职责单一**
   - 方法/函数应只做一件事，保持职责单一
   - 每个方法/函数应该有明确的输入和输出

#### 3.1.3 代码可读性规范
1. **命名规范**
   - 方法/函数名应清晰表达功能
   - 变量名应具有业务含义，避免使用单字母变量
   - 常量应提取，避免魔法数字和字符串

2. **注释规范**
   - 复杂业务逻辑必须添加注释说明
   - 公共方法/函数必须添加文档注释
   - 关键算法和业务规则需要详细注释

### 3.2 权限控制开发要点

#### 3.2.1 数据权限过滤实现
1. Service层实现
   - 获取当前登录用户信息
   - 根据用户角色添加查询条件
   - 系统管理员：不添加过滤条件
   - 学校管理员：添加`school_id = 当前用户学校ID`
   - 学院负责人：添加`college_id = 当前用户学院ID`
   - 班主任：添加`class_id = 当前用户班级ID`
   - 其他角色：添加`user_id = 当前用户ID`

2. 查询条件构建
   - 使用MyBatis Plus的`QueryWrapper`动态构建
   - 根据用户角色动态添加条件
   - 确保数据隔离

#### 3.2.2 接口权限控制
1. Controller层实现
   - 所有接口方法添加`@PreAuthorize`注解
   - 明确指定所需角色或权限
   - 示例：`@PreAuthorize("hasRole('ROLE_SCHOOL_ADMIN')")`

2. 权限验证流程
   - JWT过滤器验证Token
   - 获取用户角色和权限
   - Spring Security验证接口权限
   - 权限不足返回403错误

#### 3.2.3 角色分配权限矩阵
各角色在添加用户/教师/学生时，可以分配的角色权限如下表：

| 当前角色 | 系统管理员 | 学校管理员 | 学院负责人 | 班主任 | 指导教师 | 学生 | 企业管理员 | 企业导师 |
|---------|-----------|-----------|-----------|--------|---------|------|-----------|---------|
| **系统管理员** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **学校管理员** | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ |
| **学院负责人** | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ |
| **班主任** | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ | ❌ | ❌ |
| **企业管理员** | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |

**权限说明：**
- ✅ 表示可以分配该角色
- ❌ 表示不能分配该角色
- **系统管理员**：可以分配所有角色（最高权限）
- **学校管理员**：可以分配学校相关角色（学校管理员、学院负责人、班主任、指导教师、学生），不能分配企业相关角色
- **学院负责人**：只能分配教师相关角色（学院负责人、班主任、指导教师）和学生角色，不能分配系统管理员、学校管理员、企业相关角色
- **班主任**：只能分配学生角色，不能分配其他任何角色
- **企业管理员**：只能分配企业导师角色，不能分配其他任何角色

#### 3.2.4 用户编辑权限矩阵
各角色在编辑用户信息时的权限如下表：

| 当前角色 | 系统管理员 | 学校管理员 | 学院负责人 | 班主任 | 指导教师 | 学生 | 企业管理员 | 企业导师 |
|---------|-----------|-----------|-----------|--------|---------|------|-----------|---------|
| **系统管理员** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **学校管理员** | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ |
| **学院负责人** | ❌ | ❌ | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ |
| **班主任** | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ | ❌ | ❌ |
| **企业管理员** | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |

**权限说明：**
- ✅ 表示可以编辑该角色的用户信息
- ❌ 表示不能编辑该角色的用户信息
- **系统管理员**：可以编辑所有用户信息
- **学校管理员**：可以编辑学校相关角色的用户信息，不能编辑系统管理员、企业相关角色的用户信息
- **学院负责人**：可以编辑教师相关角色和学生角色的用户信息，不能编辑系统管理员、学校管理员、企业相关角色的用户信息
- **班主任**：只能编辑学生角色的用户信息，不能编辑其他任何角色的用户信息
- **企业管理员**：只能编辑企业相关角色的用户信息，不能编辑其他任何角色的用户信息

#### 3.2.5 角色分配权限检查实现
1. **后端实现**
   - 使用`DataPermissionUtil.canAssignRole(roleCode)`方法检查权限
   - 在分配角色前必须调用此方法进行权限验证
   - 实现位置：`TeacherServiceImpl.addTeacherWithUser()`、`StudentServiceImpl.approveStudentRegistration()`、`EnterpriseMentorServiceImpl.addEnterpriseMentorWithUser()`

2. **前端实现**
   - 使用`canAssignRole(roleCode)`函数检查权限
   - 在角色下拉列表中过滤不可分配的角色
   - 实现位置：`TeacherManagement.vue`、`UserManagement.vue`

3. **权限检查规则**
   - 系统管理员：可以分配所有角色
   - 学校管理员：可以分配学校相关角色，不能分配企业相关角色
   - 学院负责人：只能分配教师相关角色和学生角色
   - 班主任：只能分配学生角色
   - 企业管理员：只能分配企业导师角色

### 3.3 用户注册流程开发要点

#### 3.3.1 企业自主注册
1. 注册流程
   - 企业填写注册信息（企业名称、营业执照、企业规模、行业类别等）
   - 提交注册申请
   - 系统生成待审核状态账号
   - 学校管理员审核企业资质
   - 审核通过后激活账号，发送通知

2. 审核功能
   - 学校管理员查看待审核企业列表
   - 查看企业详细信息
   - 审核通过/拒绝操作
   - 审核意见填写

#### 3.3.2 企业学校合作关系管理
1. 合作关系建立
   - 学校管理员或系统管理员可以添加合作关系
   - 填写合作信息：合作类型、开始时间、结束时间、合作描述
   - 合作关系状态：进行中、已结束
   - 建立合作关系后，该学校的学生才能向该企业投递简历

2. 合作关系管理
   - 查看合作关系列表（按企业或按学校）
   - 编辑合作关系信息
   - 删除合作关系（软删除）
   - 合作关系查询（根据企业ID查询合作学校，根据学校ID查询合作企业）

3. 数据权限
   - 系统管理员：可以管理所有合作关系
   - 学校管理员：只能管理本校的合作关系
   - 企业管理员：只能查看本企业的合作关系（只读）

#### 3.3.3 学生注册两种方式
1. 方式一：Excel批量导入
   - 提供Excel模板下载
   - 班主任填写学生信息（学号、姓名、身份证号等）
   - 上传Excel文件
   - 系统解析Excel，批量创建学生账号
   - 生成初始密码（随机生成或统一密码）
   - 学生首次登录强制修改密码

2. 方式二：学生自主注册
   - 学生填写个人信息（学号、姓名、身份证号等）
   - 输入班级分享码
   - 系统验证分享码（有效性、过期时间、所属班级）
   - 验证通过后自动关联班级
   - 提交注册申请
   - 班主任审核学生基本信息
   - 审核通过后激活账号

### 3.4 数据权限过滤开发要点

#### 3.4.1 企业和管理员数据权限优化
1. **企业管理数据权限**：
   - 系统管理员：可查看所有企业
   - 学校管理员：只能查看和本校有合作关系的企业
     - 实现方式：通过合作关系表（`enterprise_school_cooperation`）查询企业ID列表，然后过滤
   - 班主任：只能查看和管理的班级有合作关系的企业
     - 实现方式：先查询本班学生所属学校，再通过合作关系表查询企业ID列表
   - 企业管理员：只能查看本企业

2. **企业导师管理数据权限**：
   - 系统管理员：可查看所有企业导师
   - 学校管理员：只能查看和本校有合作关系的企业的导师
     - 实现方式：先通过合作关系表查询企业ID列表，再过滤企业导师
   - 班主任：只能查看和管理的班级有合作关系的企业的导师
     - 实现方式：先查询本班学生所属学校，再通过合作关系表查询企业ID列表，再过滤企业导师
   - 企业管理员：只能查看本企业的导师（已实现）

3. **实现要点**：
   - 在`EnterpriseServiceImpl.getEnterprisePage()`中实现数据权限过滤
   - 在`EnterpriseMentorServiceImpl.getEnterpriseMentorPage()`中实现数据权限过滤
   - 使用MyBatis Plus的`QueryWrapper`动态构建查询条件
   - 先查询合作关系表获取企业ID列表，再使用`wrapper.in()`方法过滤

### 3.5 实习过程跟踪开发要点

#### 3.5.1 实习日志和周报
1. 富文本编辑（已实现）
   - ✅ 集成Quill富文本编辑器
   - ✅ 支持文本格式化（标题、字体、颜色、加粗、斜体等）
   - ✅ 支持列表、对齐、引用、代码块
   - ✅ 支持链接和图片插入
   - ✅ 内容以HTML格式保存到数据库
   - ✅ 前端使用`RichTextEditor`组件统一封装

2. 附件上传（已实现）
   - ✅ 文件上传接口（`/file/upload`和`/file/upload/single`）
   - ✅ 支持的文件类型：Word文档（.doc, .docx）、PDF、图片、Excel、压缩文件等
   - ✅ 文件大小限制：单个文件最大10MB
   - ✅ 文件存储：按日期分类存储（yyyy/MM/dd）
   - ✅ 文件命名：使用UUID生成唯一文件名
   - ✅ 附件URL存储：多个附件用逗号分隔存储在`attachment_urls`字段
   - ✅ 静态资源访问：配置`/uploads/**`路径允许访问上传的文件
   - ✅ 前端支持多文件上传（最多5个文件）
   - ✅ 附件列表展示和删除功能

3. 批阅功能
   - 指导教师查看日志/周报列表
   - 查看详情和批阅
   - 批阅意见填写
   - 批阅状态标记

#### 3.5.2 考勤记录
1. 考勤确认
   - 企业导师/企业管理员确认考勤
   - 支持批量确认
   - 考勤类型：出勤、迟到、早退、请假

2. 考勤统计
   - 学生查看个人考勤记录
   - 考勤统计（出勤率、请假次数等）
   - 考勤报表生成

### 3.6 学生实习企业绑定开发要点

#### 3.6.1 学生实习企业绑定逻辑
1. **方式一：选择合作企业**（推荐）
   - 学生登录后，进入"实习企业绑定"页面
   - 系统查询与所属学校有合作关系的企业列表（通过合作关系表查询）
   - 学生从列表中选择企业
   - 选择企业后，显示该企业发布的岗位列表
   - 学生可以选择岗位进行投递

2. **方式二：自主实习**（备选）
   - 如果学生选择"自主实习"，显示企业信息填写表单
   - 表单字段：
     - 企业名称（必填）
     - 企业地址（必填）
     - 联系人（必填）
     - 联系电话（必填）
     - 企业性质（可选）
     - 实习岗位（必填）
     - 实习开始时间（必填）
     - 实习结束时间（必填）
     - 实习说明（可选）
   - 提交后，状态为"待审核"
   - 班主任或学校管理员审核
   - 审核通过后，学生可以继续实习流程（提交日志、周报等）

#### 3.6.2 简历投递限制
1. **投递限制规则**：
   - 学生只能向与所属学校有合作关系的企业投递简历
   - 学生只能投递企业发布的岗位（岗位状态为"已发布"）
   - 投递前需要验证：
     - 企业是否与学校有合作关系（通过合作关系表查询）
     - 岗位是否存在且状态为"已发布"
     - 岗位是否属于该企业

2. **实现方式**：
   - 在`InternshipApplyController`的投递接口中，先验证合作关系
   - 如果企业没有与学校建立合作关系，返回错误提示
   - 前端岗位列表页面，只显示合作企业的岗位

### 3.7 评价管理开发要点

#### 3.7.1 评价指标配置
1. 指标管理
   - 支持自定义评价指标
   - 指标分类管理
   - 指标权重配置
   - 评分标准配置（如：1-5分、优秀/良好/中等/及格/不及格）

2. 指标使用
   - 不同评价类型使用不同指标
   - 指标动态加载
   - 指标权重参与计算

#### 3.7.2 成绩计算
1. 权重配置
   - 企业评价权重（默认40%）
   - 学校评价权重（默认40%）
   - 学生自评权重（默认20%）
   - 支持管理员调整权重

2. 计算逻辑
   - 各评价类型按指标打分
   - 计算各评价类型总分
   - 按权重计算加权总分
   - 生成标准化成绩（如：百分制、等级制）

## 四、开发注意事项

### 4.1 代码规范
- 严格遵循开发规范文档
- 代码提交前必须通过代码检查
- 所有公共方法必须添加注释
- 变量和方法命名必须具有业务含义

### 4.2 模块独立性
- 每个模块必须独立开发，不可混用
- 不同角色的Controller必须分开
- 一个Service实现类只实现一个实体类的业务逻辑
- 模块间通过接口交互，降低耦合

### 4.3 权限控制
- 所有接口必须进行权限控制
- 数据查询必须进行数据权限过滤
- 前端页面必须进行权限控制
- 权限变更必须及时更新缓存

### 4.4 异常处理
- 所有方法必须进行异常处理
- 使用统一的异常处理机制
- 记录异常日志，便于问题排查
- 返回友好的错误提示

### 4.5 数据安全
- 敏感数据加密存储
- 使用参数化查询防止SQL注入
- 前后端数据校验
- 接口请求频率限制

### 4.6 性能优化
- 合理使用数据库索引
- 频繁查询的数据使用Redis缓存
- 大数据量查询使用分页
- 前端路由懒加载

### 4.7 测试要求
- 功能开发完成后必须进行自测
- 提交代码前必须通过单元测试
- 关键功能必须进行集成测试
- 上线前必须进行完整测试

## 五、里程碑节点

### 5.1 第一阶段里程碑（第2周末）
- ✅ 项目基础框架搭建完成
- ✅ 安全认证模块完成
- ✅ 基础组件开发完成

### 5.2 第二阶段里程碑（第4周末）
- ✅ 系统管理模块完成
- ✅ 班级分享码功能完成
- ✅ 数据库设计完成

### 5.3 第三阶段里程碑（第6周末）
- ✅ 用户管理模块完成
- ✅ 权限控制系统完成
- ✅ 用户注册功能完成

### 5.4 第四阶段里程碑（第8周末）
- ✅ 实习过程跟踪模块完成
- ✅ 双选管理功能完成
- ✅ 过程记录功能完成

### 5.5 第五阶段里程碑（第9周末）
- ✅ 评价管理模块完成
- ✅ 成绩计算功能完成

### 5.6 第六阶段里程碑（第10周末）
- ✅ 校企协同模块完成
- ✅ 沟通机制完成

### 5.7 第七阶段里程碑（第11周末）
- ✅ 数据统计与分析模块完成
- ✅ 报表生成功能完成

### 5.8 第八阶段里程碑（第12周末）
- ✅ 所有功能测试完成
- ✅ 性能优化完成
- ✅ 文档完善完成
- ✅ 项目上线准备完成

## 六、风险控制

### 6.1 技术风险
- **风险**：技术难点攻克时间超出预期
- **应对**：提前进行技术预研，预留缓冲时间

### 6.2 进度风险
- **风险**：开发进度延期
- **应对**：每周进行进度检查，及时调整计划

### 6.3 需求风险
- **风险**：需求变更导致返工
- **应对**：需求确认后再开发，变更走变更流程

### 6.4 质量风险
- **风险**：测试不充分导致线上问题
- **应对**：严格执行测试流程，代码审查机制

### 6.5 人员风险
- **风险**：人员变动影响项目进度
- **应对**：代码文档完善，知识共享机制

## 七、质量保证

### 7.1 代码质量
- 代码审查机制
- 代码规范检查
- 单元测试覆盖率要求
- 代码重构机制

### 7.2 功能质量
- 功能测试完整
- 异常场景覆盖
- 边界条件测试
- 用户体验测试

### 7.3 性能质量
- 性能测试
- 压力测试
- 响应时间要求
- 并发处理能力

### 7.4 安全质量
- 安全测试
- 漏洞扫描
- 权限测试
- 数据安全测试

## 八、项目交付物清单

### 8.1 代码交付物
- 后端源代码（完整可运行）
- 前端源代码（完整可运行）
- 数据库脚本（建表、初始化数据）
- 配置文件（各环境配置）

### 8.2 文档交付物
- 需求文档
- 设计文档（数据库设计、接口设计）
- 开发规范文档
- 开发计划文档
- API接口文档（使用Swagger生成）
- 数据库设计文档
- 部署文档
- 用户操作手册
- 运维文档
- 测试文档（测试用例、测试报告）

### 8.3 其他交付物
- 项目演示视频
- 培训材料
- 问题反馈机制

## 九、后续维护计划

### 9.1 维护内容
- Bug修复
- 功能优化
- 性能优化
- 安全加固

### 9.2 维护周期
- 紧急问题：24小时内响应
- 一般问题：3个工作日内解决
- 功能优化：按需求优先级安排

### 9.3 版本迭代
- 小版本迭代：每月一次（Bug修复、小功能优化）
- 大版本迭代：每季度一次（新功能、重大优化）

