# 动态菜单方案设计文档

## 一、方案概述

本文档提供了三种基于角色的动态菜单实现方案，用于根据用户角色动态显示不同的菜单项。

## 二、角色定义

系统包含以下8种角色：

1. **ROLE_SYSTEM_ADMIN** - 系统管理员
2. **ROLE_SCHOOL_ADMIN** - 学校管理员
3. **ROLE_COLLEGE_LEADER** - 学院领导
4. **ROLE_CLASS_TEACHER** - 班主任
5. **ROLE_INSTRUCTOR** - 指导教师
6. **ROLE_ENTERPRISE_ADMIN** - 企业管理员
7. **ROLE_ENTERPRISE_MENTOR** - 企业导师
8. **ROLE_STUDENT** - 学生

## 三、各角色菜单权限设计

### 3.1 系统管理员 (ROLE_SYSTEM_ADMIN)
- ✅ 首页
- ✅ 系统管理
  - ✅ 学校管理
  - ✅ 学院管理
  - ✅ 专业管理
  - ✅ 班级管理
  - ✅ 学期管理
  - ✅ 系统配置
  - ✅ 班主任任命
- ✅ 用户管理
  - ✅ 用户管理
  - ✅ 学生管理
  - ✅ 教师管理
  - ✅ 企业管理
  - ✅ 企业导师管理
- ✅ 实习管理（管理员）
  - ✅ 实习计划管理
  - ✅ 实习申请审核

### 3.2 学校管理员 (ROLE_SCHOOL_ADMIN)
- ✅ 首页
- ✅ 系统管理
  - ✅ 学院管理
  - ✅ 专业管理
  - ✅ 班级管理
  - ✅ 学期管理
  - ✅ 系统配置
- ✅ 用户管理
  - ✅ 用户管理
  - ✅ 教师管理
  - ✅ 合作企业管理
  - ✅ 企业导师详情
- ✅ 实习管理（管理员）
  - ✅ 实习计划管理
  - ✅ 实习申请审核

### 3.3 学院领导 (ROLE_COLLEGE_LEADER)
- ✅ 首页
- ✅ 系统管理
  - ✅ 专业管理
  - ✅ 班级管理
  - ✅ 班主任任命
- ✅ 用户管理
  - ✅ 用户管理
  - ✅ 教师管理
- ✅ 实习管理（教师）
  - ✅ 实习日志批阅
  - ✅ 周报批阅
  - ✅ 成果审核
  - ✅ 问题反馈处理

### 3.4 班主任 (ROLE_CLASS_TEACHER)
- ✅ 首页
- ✅ 系统管理
  - ✅ 班级管理
- ✅ 用户管理
  - ✅ 用户管理
  - ✅ 学生管理
- ✅ 实习管理（管理员）
  - ✅ 实习申请审核
- ✅ 实习管理（教师）
  - ✅ 实习日志批阅
  - ✅ 周报批阅
  - ✅ 成果审核
  - ✅ 问题反馈处理

### 3.5 指导教师 (ROLE_INSTRUCTOR)
- ✅ 首页
- ✅ 实习管理（教师）
  - ✅ 实习日志批阅
  - ✅ 周报批阅
  - ✅ 成果审核
  - ✅ 问题反馈处理

### 3.6 企业管理员 (ROLE_ENTERPRISE_ADMIN)
- ✅ 首页
- ✅ 企业管理
  - ✅ 企业导师管理
- ✅ 实习管理（企业）
  - ✅ 岗位管理
  - ✅ 面试管理
  - ✅ 考勤管理

### 3.7 企业导师 (ROLE_ENTERPRISE_MENTOR)
- ✅ 首页
- ✅ 实习管理（企业）
  - ✅ 考勤管理
  - ✅ 问题反馈处理
- ✅ 实习管理（教师）
  - ✅ 问题反馈处理

### 3.8 学生 (ROLE_STUDENT)
- ✅ 首页
- ✅ 实习管理（学生）
  - ✅ 岗位列表
  - ✅ 实习申请
  - ✅ 我的面试
  - ✅ 实习日志
  - ✅ 周报
  - ✅ 我的考勤
  - ✅ 阶段性成果
  - ✅ 问题反馈

## 四、实现方案

### 方案一：基于配置文件的动态菜单（推荐）⭐

**优点：**
- 配置集中管理，易于维护
- 前端控制，响应速度快
- 支持动态标题（如"企业管理" vs "合作企业管理"）
- 代码结构清晰

**缺点：**
- 菜单变更需要重新部署前端
- 权限控制在前端，安全性较低（需要后端路由守卫配合）

**实现方式：**
1. 创建 `menu.config.js` 配置文件
2. 在 `MainLayout.vue` 中使用配置生成菜单
3. 根据用户角色过滤菜单项

**适用场景：**
- 菜单结构相对稳定
- 需要快速响应
- 权限控制主要在后端

### 方案二：基于后端API的动态菜单

**优点：**
- 权限控制完全在后端，安全性高
- 菜单变更无需重新部署前端
- 支持更复杂的权限逻辑

**缺点：**
- 需要额外的API接口
- 响应速度相对较慢
- 前端需要处理异步加载

**实现方式：**
1. 后端提供 `/api/menu` 接口，根据用户角色返回菜单配置
2. 前端在登录后或路由守卫中调用接口获取菜单
3. 将菜单配置缓存到 store 中
4. 在 `MainLayout.vue` 中渲染菜单

**适用场景：**
- 菜单结构经常变化
- 需要严格的权限控制
- 支持多租户或动态权限

### 方案三：基于角色的菜单配置对象（前端配置）

**优点：**
- 代码简洁，易于理解
- 性能好，无需API调用
- 支持TypeScript类型检查

**缺点：**
- 每个角色需要单独配置
- 菜单变更需要修改代码
- 可能存在代码重复

**实现方式：**
1. 为每个角色定义菜单配置对象
2. 根据当前用户角色选择对应的菜单配置
3. 在 `MainLayout.vue` 中渲染菜单

**适用场景：**
- 角色数量较少
- 各角色菜单差异较大
- 需要快速实现

## 五、推荐方案

**推荐使用方案一（基于配置文件的动态菜单）**，原因：
1. 配置集中，易于维护
2. 性能好，无需API调用
3. 支持动态标题等高级特性
4. 代码结构清晰，易于扩展

## 六、安全建议

无论使用哪种方案，都需要：
1. **后端路由守卫**：确保用户无法通过直接访问URL绕过权限控制
2. **API权限验证**：后端API需要验证用户权限
3. **前端路由守卫**：在路由跳转时检查权限
4. **菜单权限验证**：菜单显示只是UI层面的控制，不能作为唯一的安全措施

## 七、扩展性考虑

1. **多角色支持**：用户可能拥有多个角色，需要合并菜单
2. **动态权限**：未来可能需要支持更细粒度的权限控制（如按钮级别）
3. **菜单排序**：支持自定义菜单顺序
4. **菜单图标**：支持自定义图标
5. **菜单分组**：支持菜单分组和折叠

