# 第四阶段：实习过程跟踪模块 - 数据库设计文档

## 一、数据库表设计

### 1.1 实习计划表（internship_plan）

**表名**：`internship_plan`

**表说明**：存储实习计划信息，由学校管理员或教务处创建和管理

**字段设计**：

| 字段名 | 类型 | 长度 | 是否为空 | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| plan_id | BIGINT | - | NOT NULL | AUTO_INCREMENT | 主键ID |
| plan_name | VARCHAR | 200 | NOT NULL | - | 实习计划名称 |
| plan_code | VARCHAR | 50 | NOT NULL | - | 实习计划编号（唯一） |
| semester_id | BIGINT | - | NULL | - | 关联学期ID |
| school_id | BIGINT | - | NOT NULL | - | 所属学校ID |
| college_id | BIGINT | - | NULL | - | 所属学院ID（可选，NULL表示全校） |
| major_id | BIGINT | - | NULL | - | 所属专业ID（可选，NULL表示全院） |
| plan_type | VARCHAR | 50 | NOT NULL | - | 实习类型（生产实习、毕业实习等） |
| start_date | DATE | - | NOT NULL | - | 实习开始日期 |
| end_date | DATE | - | NOT NULL | - | 实习结束日期 |
| plan_outline | TEXT | - | NULL | - | 实习大纲（富文本） |
| task_requirements | TEXT | - | NULL | - | 任务要求（富文本） |
| assessment_standards | TEXT | - | NULL | - | 考核标准（富文本） |
| status | TINYINT | 1 | NOT NULL | 0 | 状态：0-草稿，1-待审核，2-已通过，3-已拒绝，4-已发布 |
| audit_user_id | BIGINT | - | NULL | - | 审核人ID |
| audit_time | DATETIME | - | NULL | - | 审核时间 |
| audit_opinion | VARCHAR | 500 | NULL | - | 审核意见 |
| publish_time | DATETIME | - | NULL | - | 发布时间 |
| create_user_id | BIGINT | - | NOT NULL | - | 创建人ID |
| delete_flag | TINYINT | 1 | NOT NULL | 0 | 删除标志：0-未删除，1-已删除 |
| create_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 创建时间 |
| update_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 更新时间 |

**索引设计**：
- PRIMARY KEY (`plan_id`)
- UNIQUE KEY `uk_plan_code` (`plan_code`, `delete_flag`)
- KEY `idx_semester_id` (`semester_id`)
- KEY `idx_school_id` (`school_id`)
- KEY `idx_college_id` (`college_id`)
- KEY `idx_major_id` (`major_id`)
- KEY `idx_status` (`status`)
- KEY `idx_create_time` (`create_time`)

---

### 1.2 实习岗位表（internship_post）

**表名**：`internship_post`

**表说明**：存储企业发布的实习岗位信息

**字段设计**：

| 字段名 | 类型 | 长度 | 是否为空 | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| post_id | BIGINT | - | NOT NULL | AUTO_INCREMENT | 主键ID |
| enterprise_id | BIGINT | - | NOT NULL | - | 企业ID |
| post_name | VARCHAR | 200 | NOT NULL | - | 岗位名称 |
| post_code | VARCHAR | 50 | NOT NULL | - | 岗位编号（企业内唯一） |
| post_description | TEXT | - | NULL | - | 岗位描述（富文本） |
| skill_requirements | TEXT | - | NULL | - | 技能要求（富文本） |
| work_location | VARCHAR | 200 | NOT NULL | - | 工作地点 |
| work_address | VARCHAR | 500 | NULL | - | 详细地址 |
| recruit_count | INT | - | NOT NULL | 1 | 招聘人数 |
| applied_count | INT | - | NOT NULL | 0 | 已申请人数 |
| accepted_count | INT | - | NOT NULL | 0 | 已录用人数 |
| salary_min | DECIMAL | 10,2 | NULL | - | 最低薪资（元/月） |
| salary_max | DECIMAL | 10,2 | NULL | - | 最高薪资（元/月） |
| salary_type | VARCHAR | 50 | NULL | - | 薪资类型（月薪、日薪、时薪、面议） |
| internship_start_date | DATE | - | NULL | - | 实习开始日期 |
| internship_end_date | DATE | - | NULL | - | 实习结束日期 |
| work_hours | VARCHAR | 100 | NULL | - | 工作时间（如：周一至周五 9:00-18:00） |
| contact_person | VARCHAR | 100 | NULL | - | 联系人 |
| contact_phone | VARCHAR | 20 | NULL | - | 联系电话 |
| contact_email | VARCHAR | 100 | NULL | - | 联系邮箱 |
| status | TINYINT | 1 | NOT NULL | 0 | 状态：0-待审核，1-已通过，2-已拒绝，3-已发布，4-已关闭 |
| audit_user_id | BIGINT | - | NULL | - | 审核人ID |
| audit_time | DATETIME | - | NULL | - | 审核时间 |
| audit_opinion | VARCHAR | 500 | NULL | - | 审核意见 |
| publish_time | DATETIME | - | NULL | - | 发布时间 |
| close_time | DATETIME | - | NULL | - | 关闭时间 |
| delete_flag | TINYINT | 1 | NOT NULL | 0 | 删除标志：0-未删除，1-已删除 |
| create_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 创建时间 |
| update_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 更新时间 |

**索引设计**：
- PRIMARY KEY (`post_id`)
- UNIQUE KEY `uk_post_code` (`enterprise_id`, `post_code`, `delete_flag`)
- KEY `idx_enterprise_id` (`enterprise_id`)
- KEY `idx_status` (`status`)
- KEY `idx_publish_time` (`publish_time`)
- KEY `idx_create_time` (`create_time`)

---

### 1.3 实习申请表（internship_apply）

**表名**：`internship_apply`

**表说明**：存储学生实习申请信息，包括选择合作企业和自主实习两种情况

**字段设计**：

| 字段名 | 类型 | 长度 | 是否为空 | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| apply_id | BIGINT | - | NOT NULL | AUTO_INCREMENT | 主键ID |
| student_id | BIGINT | - | NOT NULL | - | 学生ID |
| user_id | BIGINT | - | NOT NULL | - | 用户ID |
| apply_type | TINYINT | 1 | NOT NULL | 1 | 申请类型：1-合作企业，2-自主实习 |
| enterprise_id | BIGINT | - | NULL | - | 企业ID（合作企业时必填） |
| post_id | BIGINT | - | NULL | - | 岗位ID（合作企业时可选） |
| self_enterprise_name | VARCHAR | 200 | NULL | - | 自主实习企业名称 |
| self_enterprise_address | VARCHAR | 500 | NULL | - | 自主实习企业地址 |
| self_contact_person | VARCHAR | 100 | NULL | - | 自主实习联系人 |
| self_contact_phone | VARCHAR | 20 | NULL | - | 自主实习联系电话 |
| self_enterprise_nature | VARCHAR | 100 | NULL | - | 自主实习企业性质 |
| self_post_name | VARCHAR | 200 | NULL | - | 自主实习岗位名称 |
| self_start_date | DATE | - | NULL | - | 自主实习开始日期 |
| self_end_date | DATE | - | NULL | - | 自主实习结束日期 |
| self_description | TEXT | - | NULL | - | 自主实习说明 |
| resume_content | TEXT | - | NULL | - | 简历内容（富文本） |
| resume_attachment | VARCHAR | 500 | NULL | - | 简历附件URL（多个用逗号分隔） |
| apply_reason | TEXT | - | NULL | - | 申请理由 |
| status | TINYINT | 1 | NOT NULL | 0 | 状态：0-待审核，1-已通过，2-已拒绝，3-已录用，4-已拒绝录用 |
| audit_user_id | BIGINT | - | NULL | - | 审核人ID（班主任或学校管理员） |
| audit_time | DATETIME | - | NULL | - | 审核时间 |
| audit_opinion | VARCHAR | 500 | NULL | - | 审核意见 |
| enterprise_feedback | TEXT | - | NULL | - | 企业反馈 |
| enterprise_feedback_time | DATETIME | - | NULL | - | 企业反馈时间 |
| interview_time | DATETIME | - | NULL | - | 面试时间 |
| interview_location | VARCHAR | 200 | NULL | - | 面试地点 |
| interview_result | TINYINT | 1 | NULL | - | 面试结果：1-通过，2-不通过 |
| interview_comment | TEXT | - | NULL | - | 面试评价 |
| accept_time | DATETIME | - | NULL | - | 录用时间 |
| delete_flag | TINYINT | 1 | NOT NULL | 0 | 删除标志：0-未删除，1-已删除 |
| create_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 创建时间 |
| update_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 更新时间 |

**索引设计**：
- PRIMARY KEY (`apply_id`)
- KEY `idx_student_id` (`student_id`)
- KEY `idx_user_id` (`user_id`)
- KEY `idx_enterprise_id` (`enterprise_id`)
- KEY `idx_post_id` (`post_id`)
- KEY `idx_apply_type` (`apply_type`)
- KEY `idx_status` (`status`)
- KEY `idx_create_time` (`create_time`)

---

### 1.4 面试表（interview）

**表名**：`interview`

**表说明**：存储面试安排信息

**字段设计**：

| 字段名 | 类型 | 长度 | 是否为空 | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| interview_id | BIGINT | - | NOT NULL | AUTO_INCREMENT | 主键ID |
| apply_id | BIGINT | - | NOT NULL | - | 申请ID |
| enterprise_id | BIGINT | - | NOT NULL | - | 企业ID |
| student_id | BIGINT | - | NOT NULL | - | 学生ID |
| interview_type | TINYINT | 1 | NOT NULL | 1 | 面试类型：1-现场面试，2-视频面试，3-电话面试 |
| interview_time | DATETIME | - | NOT NULL | - | 面试时间 |
| interview_location | VARCHAR | 500 | NULL | - | 面试地点（现场面试时必填） |
| interview_link | VARCHAR | 500 | NULL | - | 面试链接（视频面试时必填） |
| interview_phone | VARCHAR | 20 | NULL | - | 面试电话（电话面试时必填） |
| interviewer | VARCHAR | 200 | NULL | - | 面试官（多个用逗号分隔） |
| interview_content | TEXT | - | NULL | - | 面试内容/要求 |
| student_confirm | TINYINT | 1 | NOT NULL | 0 | 学生确认：0-未确认，1-已确认，2-已拒绝 |
| student_confirm_time | DATETIME | - | NULL | - | 学生确认时间 |
| interview_result | TINYINT | 1 | NULL | - | 面试结果：1-通过，2-不通过，3-待定 |
| interview_comment | TEXT | - | NULL | - | 面试评价 |
| interview_feedback_time | DATETIME | - | NULL | - | 面试反馈时间 |
| status | TINYINT | 1 | NOT NULL | 0 | 状态：0-待确认，1-已确认，2-已完成，3-已取消 |
| delete_flag | TINYINT | 1 | NOT NULL | 0 | 删除标志：0-未删除，1-已删除 |
| create_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 创建时间 |
| update_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 更新时间 |

**索引设计**：
- PRIMARY KEY (`interview_id`)
- KEY `idx_apply_id` (`apply_id`)
- KEY `idx_enterprise_id` (`enterprise_id`)
- KEY `idx_student_id` (`student_id`)
- KEY `idx_interview_time` (`interview_time`)
- KEY `idx_status` (`status`)

---

### 1.5 实习日志表（internship_log）

**表名**：`internship_log`

**表说明**：存储学生提交的实习日志

**字段设计**：

| 字段名 | 类型 | 长度 | 是否为空 | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| log_id | BIGINT | - | NOT NULL | AUTO_INCREMENT | 主键ID |
| student_id | BIGINT | - | NOT NULL | - | 学生ID |
| user_id | BIGINT | - | NOT NULL | - | 用户ID |
| apply_id | BIGINT | - | NOT NULL | - | 申请ID（关联实习申请） |
| log_date | DATE | - | NOT NULL | - | 日志日期 |
| log_title | VARCHAR | 200 | NOT NULL | - | 日志标题 |
| log_content | TEXT | - | NOT NULL | - | 日志内容（富文本） |
| attachment_urls | VARCHAR | 1000 | NULL | - | 附件URL（多个用逗号分隔） |
| work_hours | DECIMAL | 5,2 | NULL | - | 工作时长（小时） |
| work_summary | TEXT | - | NULL | - | 工作总结 |
| problems_encountered | TEXT | - | NULL | - | 遇到的问题 |
| instructor_id | BIGINT | - | NULL | - | 指导教师ID |
| review_status | TINYINT | 1 | NOT NULL | 0 | 批阅状态：0-未批阅，1-已批阅 |
| review_time | DATETIME | - | NULL | - | 批阅时间 |
| review_comment | TEXT | - | NULL | - | 批阅意见 |
| review_score | DECIMAL | 5,2 | NULL | - | 批阅评分（0-100） |
| delete_flag | TINYINT | 1 | NOT NULL | 0 | 删除标志：0-未删除，1-已删除 |
| create_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 创建时间 |
| update_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 更新时间 |

**索引设计**：
- PRIMARY KEY (`log_id`)
- KEY `idx_student_id` (`student_id`)
- KEY `idx_user_id` (`user_id`)
- KEY `idx_apply_id` (`apply_id`)
- KEY `idx_log_date` (`log_date`)
- KEY `idx_instructor_id` (`instructor_id`)
- KEY `idx_review_status` (`review_status`)
- KEY `idx_create_time` (`create_time`)

---

### 1.6 周报表（internship_weekly_report）

**表名**：`internship_weekly_report`

**表说明**：存储学生提交的实习周报

**字段设计**：

| 字段名 | 类型 | 长度 | 是否为空 | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| report_id | BIGINT | - | NOT NULL | AUTO_INCREMENT | 主键ID |
| student_id | BIGINT | - | NOT NULL | - | 学生ID |
| user_id | BIGINT | - | NOT NULL | - | 用户ID |
| apply_id | BIGINT | - | NOT NULL | - | 申请ID（关联实习申请） |
| week_number | INT | - | NOT NULL | - | 周次（第几周） |
| report_date | DATE | - | NOT NULL | - | 周报日期 |
| report_title | VARCHAR | 200 | NOT NULL | - | 周报标题 |
| work_summary | TEXT | - | NOT NULL | - | 本周工作总结（富文本） |
| work_content | TEXT | - | NULL | - | 工作内容（富文本） |
| achievements | TEXT | - | NULL | - | 工作成果（富文本） |
| problems_reflections | TEXT | - | NULL | - | 问题与反思（富文本） |
| next_week_plan | TEXT | - | NULL | - | 下周计划（富文本） |
| attachment_urls | VARCHAR | 1000 | NULL | - | 附件URL（多个用逗号分隔） |
| instructor_id | BIGINT | - | NULL | - | 指导教师ID |
| review_status | TINYINT | 1 | NOT NULL | 0 | 批阅状态：0-未批阅，1-已批阅 |
| review_time | DATETIME | - | NULL | - | 批阅时间 |
| review_comment | TEXT | - | NULL | - | 批阅意见 |
| review_score | DECIMAL | 5,2 | NULL | - | 批阅评分（0-100） |
| delete_flag | TINYINT | 1 | NOT NULL | 0 | 删除标志：0-未删除，1-已删除 |
| create_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 创建时间 |
| update_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 更新时间 |

**索引设计**：
- PRIMARY KEY (`report_id`)
- KEY `idx_student_id` (`student_id`)
- KEY `idx_user_id` (`user_id`)
- KEY `idx_apply_id` (`apply_id`)
- KEY `idx_week_number` (`week_number`)
- KEY `idx_report_date` (`report_date`)
- KEY `idx_instructor_id` (`instructor_id`)
- KEY `idx_review_status` (`review_status`)
- KEY `idx_create_time` (`create_time`)

---

### 1.7 考勤表（attendance）

**表名**：`attendance`

**表说明**：存储学生实习考勤记录

**字段设计**：

| 字段名 | 类型 | 长度 | 是否为空 | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| attendance_id | BIGINT | - | NOT NULL | AUTO_INCREMENT | 主键ID |
| student_id | BIGINT | - | NOT NULL | - | 学生ID |
| user_id | BIGINT | - | NOT NULL | - | 用户ID |
| apply_id | BIGINT | - | NOT NULL | - | 申请ID（关联实习申请） |
| attendance_date | DATE | - | NOT NULL | - | 考勤日期 |
| attendance_type | TINYINT | 1 | NOT NULL | 1 | 考勤类型：1-出勤，2-迟到，3-早退，4-请假，5-缺勤 |
| check_in_time | DATETIME | - | NULL | - | 签到时间 |
| check_out_time | DATETIME | - | NULL | - | 签退时间 |
| work_hours | DECIMAL | 5,2 | NULL | - | 工作时长（小时） |
| leave_reason | VARCHAR | 500 | NULL | - | 请假原因（请假时必填） |
| leave_type | VARCHAR | 50 | NULL | - | 请假类型（事假、病假、调休等） |
| confirm_user_id | BIGINT | - | NULL | - | 确认人ID（企业导师或企业管理员） |
| confirm_time | DATETIME | - | NULL | - | 确认时间 |
| confirm_status | TINYINT | 1 | NOT NULL | 0 | 确认状态：0-待确认，1-已确认，2-已拒绝 |
| confirm_comment | VARCHAR | 500 | NULL | - | 确认意见 |
| delete_flag | TINYINT | 1 | NOT NULL | 0 | 删除标志：0-未删除，1-已删除 |
| create_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 创建时间 |
| update_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 更新时间 |

**索引设计**：
- PRIMARY KEY (`attendance_id`)
- KEY `idx_student_id` (`student_id`)
- KEY `idx_user_id` (`user_id`)
- KEY `idx_apply_id` (`apply_id`)
- KEY `idx_attendance_date` (`attendance_date`)
- KEY `idx_attendance_type` (`attendance_type`)
- KEY `idx_confirm_user_id` (`confirm_user_id`)
- KEY `idx_confirm_status` (`confirm_status`)
- KEY `idx_create_time` (`create_time`)

---

### 1.8 阶段性成果表（internship_achievement）

**表名**：`internship_achievement`

**表说明**：存储学生提交的阶段性工作成果

**字段设计**：

| 字段名 | 类型 | 长度 | 是否为空 | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| achievement_id | BIGINT | - | NOT NULL | AUTO_INCREMENT | 主键ID |
| student_id | BIGINT | - | NOT NULL | - | 学生ID |
| user_id | BIGINT | - | NOT NULL | - | 用户ID |
| apply_id | BIGINT | - | NOT NULL | - | 申请ID（关联实习申请） |
| achievement_name | VARCHAR | 200 | NOT NULL | - | 成果名称 |
| achievement_type | VARCHAR | 50 | NOT NULL | - | 成果类型（项目文档、工作成果、学习笔记等） |
| achievement_description | TEXT | - | NULL | - | 成果描述（富文本） |
| file_urls | VARCHAR | 1000 | NOT NULL | - | 文件URL（多个用逗号分隔） |
| submit_date | DATE | - | NOT NULL | - | 提交日期 |
| instructor_id | BIGINT | - | NULL | - | 指导教师ID |
| review_status | TINYINT | 1 | NOT NULL | 0 | 审核状态：0-待审核，1-已通过，2-已拒绝 |
| review_time | DATETIME | - | NULL | - | 审核时间 |
| review_comment | TEXT | - | NULL | - | 审核意见 |
| delete_flag | TINYINT | 1 | NOT NULL | 0 | 删除标志：0-未删除，1-已删除 |
| create_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 创建时间 |
| update_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 更新时间 |

**索引设计**：
- PRIMARY KEY (`achievement_id`)
- KEY `idx_student_id` (`student_id`)
- KEY `idx_user_id` (`user_id`)
- KEY `idx_apply_id` (`apply_id`)
- KEY `idx_achievement_type` (`achievement_type`)
- KEY `idx_submit_date` (`submit_date`)
- KEY `idx_instructor_id` (`instructor_id`)
- KEY `idx_review_status` (`review_status`)

---

### 1.9 问题反馈表（internship_feedback）

**表名**：`internship_feedback`

**表说明**：存储学生提交的问题反馈和教师/导师的指导建议

**字段设计**：

| 字段名 | 类型 | 长度 | 是否为空 | 默认值 | 说明 |
|--------|------|------|---------|--------|------|
| feedback_id | BIGINT | - | NOT NULL | AUTO_INCREMENT | 主键ID |
| student_id | BIGINT | - | NOT NULL | - | 学生ID |
| user_id | BIGINT | - | NOT NULL | - | 用户ID |
| apply_id | BIGINT | - | NOT NULL | - | 申请ID（关联实习申请） |
| feedback_type | TINYINT | 1 | NOT NULL | 1 | 反馈类型：1-问题反馈，2-建议反馈，3-求助反馈 |
| feedback_title | VARCHAR | 200 | NOT NULL | - | 反馈标题 |
| feedback_content | TEXT | - | NOT NULL | - | 反馈内容（富文本） |
| attachment_urls | VARCHAR | 1000 | NULL | - | 附件URL（多个用逗号分隔） |
| feedback_status | TINYINT | 1 | NOT NULL | 0 | 反馈状态：0-待处理，1-处理中，2-已解决，3-已关闭 |
| reply_user_id | BIGINT | - | NULL | - | 回复人ID（教师或导师） |
| reply_user_type | TINYINT | 1 | NULL | - | 回复人类型：1-指导教师，2-企业导师 |
| reply_content | TEXT | - | NULL | - | 回复内容（富文本） |
| reply_time | DATETIME | - | NULL | - | 回复时间 |
| solve_time | DATETIME | - | NULL | - | 解决时间 |
| delete_flag | TINYINT | 1 | NOT NULL | 0 | 删除标志：0-未删除，1-已删除 |
| create_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 创建时间 |
| update_time | DATETIME | - | NOT NULL | CURRENT_TIMESTAMP | 更新时间 |

**索引设计**：
- PRIMARY KEY (`feedback_id`)
- KEY `idx_student_id` (`student_id`)
- KEY `idx_user_id` (`user_id`)
- KEY `idx_apply_id` (`apply_id`)
- KEY `idx_feedback_type` (`feedback_type`)
- KEY `idx_feedback_status` (`feedback_status`)
- KEY `idx_reply_user_id` (`reply_user_id`)
- KEY `idx_create_time` (`create_time`)

---

## 二、表关系说明

### 2.1 主要关联关系

1. **实习计划（internship_plan）**
   - 关联学期表（semester_info）
   - 关联学校表（school_info）
   - 关联学院表（college_info，可选）
   - 关联专业表（major_info，可选）

2. **实习岗位（internship_post）**
   - 关联企业表（enterprise_info）

3. **实习申请（internship_apply）**
   - 关联学生表（student_info）
   - 关联用户表（user_info）
   - 关联企业表（enterprise_info，可选）
   - 关联岗位表（internship_post，可选）

4. **面试（interview）**
   - 关联申请表（internship_apply）
   - 关联企业表（enterprise_info）
   - 关联学生表（student_info）

5. **实习日志（internship_log）**
   - 关联学生表（student_info）
   - 关联用户表（user_info）
   - 关联申请表（internship_apply）
   - 关联教师表（teacher_info，指导教师）

6. **周报（internship_weekly_report）**
   - 关联学生表（student_info）
   - 关联用户表（user_info）
   - 关联申请表（internship_apply）
   - 关联教师表（teacher_info，指导教师）

7. **考勤（attendance）**
   - 关联学生表（student_info）
   - 关联用户表（user_info）
   - 关联申请表（internship_apply）
   - 关联用户表（user_info，确认人）

8. **阶段性成果（internship_achievement）**
   - 关联学生表（student_info）
   - 关联用户表（user_info）
   - 关联申请表（internship_apply）
   - 关联教师表（teacher_info，指导教师）

9. **问题反馈（internship_feedback）**
   - 关联学生表（student_info）
   - 关联用户表（user_info）
   - 关联申请表（internship_apply）
   - 关联用户表（user_info，回复人）

### 2.2 数据权限说明

- **系统管理员**：可查看所有数据
- **学校管理员**：只能查看本校的数据
- **学院负责人**：只能查看本院的数据
- **班主任**：只能查看本班学生的数据
- **指导教师**：只能查看分配的学生数据
- **企业管理员**：只能查看本企业的岗位和申请数据
- **企业导师**：只能查看本企业的实习生数据
- **学生**：只能查看个人数据

---

## 三、建表SQL脚本

见下一节：接口设计文档中的建表SQL。

---

## 四、注意事项

1. **字符集**：所有表使用`utf8mb4`字符集，`utf8mb4_unicode_ci`排序规则
2. **存储引擎**：统一使用`InnoDB`存储引擎
3. **软删除**：所有表都使用`delete_flag`字段实现软删除
4. **时间字段**：使用`DATETIME`类型，支持微秒精度（`DATETIME(6)`）
5. **外键约束**：建议不创建外键约束，通过应用层保证数据一致性
6. **索引优化**：根据实际查询场景调整索引
7. **数据权限**：在Service层实现数据权限过滤

