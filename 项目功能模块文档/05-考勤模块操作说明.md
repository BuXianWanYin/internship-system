# 考勤模块操作说明

## 模块概述

考勤模块用于管理学生的实习考勤记录，包括考勤组的创建、考勤规则的设置、考勤记录的录入和审批等。

## 一、考勤组管理

### 1.1 创建考勤组

- **操作角色**：企业管理员
- **操作说明**：
  1. 进入考勤组管理页面
  2. 点击"新建考勤组"
  3. 填写考勤组信息：
     - 考勤组名称
     - 考勤组描述
     - 关联的实习申请（可选，用于自动关联学生）
  4. 保存考勤组

### 1.2 设置考勤规则

- **操作角色**：企业管理员
- **操作说明**：
  1. 选择考勤组
  2. 设置考勤规则：
     - 考勤类型（工作日考勤/弹性考勤）
     - 考勤时间段（上班时间、下班时间）
     - 考勤地点（如果需要）
     - 考勤方式（打卡/签到/其他）
  3. 保存规则

### 1.3 添加学生到考勤组

- **操作角色**：企业管理员
- **操作说明**：
  1. 选择考勤组
  2. 添加学生：
     - 可以手动添加学生
     - 可以根据实习申请自动关联学生
  3. 保存

## 二、考勤记录管理

### 2.1 录入考勤记录

#### 方式1：学生自主打卡
- **操作角色**：学生
- **操作说明**：
  1. 学生登录系统
  2. 进入考勤页面
  3. 选择考勤类型（正常/迟到/早退/缺勤）
  4. 填写考勤信息：
     - 考勤日期
     - 考勤时间
     - 考勤地点（如果需要）
     - 备注信息
  5. 提交考勤记录
- **状态**：待审批

#### 方式2：企业管理员录入
- **操作角色**：企业管理员、企业导师
- **操作说明**：
  1. 进入考勤管理页面
  2. 选择学生和日期
  3. 录入考勤信息：
     - 考勤类型
     - 考勤时间
     - 备注信息
  4. 提交考勤记录
- **状态**：已确认（无需审批）

### 2.2 审批考勤记录

- **操作角色**：企业管理员、企业导师
- **操作说明**：
  1. 查看待审批的考勤记录
  2. 审核考勤信息是否准确
  3. 选择审批结果：
     - **通过**：考勤记录生效
     - **拒绝**：考勤记录被拒绝，学生可以重新提交
  4. 填写审批意见（可选）

### 2.3 修改考勤记录

- **操作角色**：企业管理员、企业导师
- **前置条件**：
  - 考勤记录已审批通过
  - 在允许修改的时间范围内
- **操作说明**：
  1. 找到需要修改的考勤记录
  2. 修改考勤信息
  3. 保存修改

### 2.4 删除考勤记录

- **操作角色**：企业管理员
- **前置条件**：
  - 考勤记录未被最终确认
- **操作说明**：
  1. 确认删除
  2. 执行删除操作

## 三、考勤类型说明

| 类型码 | 类型名称 | 说明 |
|--------|---------|------|
| 0 | 正常 | 按时到岗，按时离岗 |
| 1 | 迟到 | 晚于规定时间到岗 |
| 2 | 早退 | 早于规定时间离岗 |
| 3 | 缺勤 | 未到岗 |
| 4 | 请假 | 已请假，不计入缺勤 |
| 5 | 补签 | 补签考勤记录 |

## 四、考勤统计

### 4.1 查看个人考勤统计

- **操作角色**：学生
- **操作说明**：
  1. 进入个人考勤统计页面
  2. 查看统计信息：
     - 总出勤天数
     - 迟到次数
     - 早退次数
     - 缺勤次数
     - 请假次数
     - 出勤率

### 4.2 查看学生考勤统计

- **操作角色**：企业管理员、企业导师、班主任、学校管理员
- **操作说明**：
  1. 进入考勤统计页面
  2. 选择学生或时间段
  3. 查看统计信息：
     - 考勤明细
     - 考勤统计
     - 考勤趋势

## 五、权限说明

### 5.1 学生
- 查看自己的考勤记录
- 提交考勤记录（打卡）
- 查看个人考勤统计

### 5.2 企业管理员
- 创建和管理考勤组
- 设置考勤规则
- 录入考勤记录
- 审批考勤记录
- 修改和删除考勤记录
- 查看本企业所有学生的考勤统计

### 5.3 企业导师
- 录入分配给自己的学生的考勤记录
- 审批分配给自己的学生的考勤记录
- 查看分配给自己的学生的考勤统计

### 5.4 班主任
- 查看本班级学生的考勤记录
- 查看本班级学生的考勤统计

### 5.5 学校管理员
- 查看所有学生的考勤记录
- 查看所有学生的考勤统计

## 六、API接口列表

| 接口 | 方法 | 说明 | 权限 |
|------|------|------|------|
| `/internship/attendance-group` | POST | 创建考勤组 | 企业管理员 |
| `/internship/attendance-group` | PUT | 更新考勤组 | 企业管理员 |
| `/internship/attendance-group/{groupId}` | GET | 查询考勤组详情 | 多角色 |
| `/internship/attendance-group/page` | GET | 分页查询考勤组列表 | 多角色 |
| `/internship/attendance-group/{groupId}` | DELETE | 删除考勤组 | 企业管理员 |
| `/internship/attendance` | POST | 录入考勤记录 | 学生/企业管理员/企业导师 |
| `/internship/attendance` | PUT | 更新考勤记录 | 企业管理员/企业导师 |
| `/internship/attendance/{attendanceId}` | GET | 查询考勤记录详情 | 多角色 |
| `/internship/attendance/page` | GET | 分页查询考勤记录列表 | 多角色 |
| `/internship/attendance/{attendanceId}/audit` | POST | 审批考勤记录 | 企业管理员/企业导师 |
| `/internship/attendance/{attendanceId}` | DELETE | 删除考勤记录 | 企业管理员 |
| `/internship/attendance/statistics` | GET | 查询考勤统计 | 多角色 |

## 七、常见问题

### Q1: 学生忘记打卡怎么办？
A: 学生可以补签，或者联系企业管理员/企业导师帮助录入。

### Q2: 考勤记录可以修改吗？
A: 企业管理员和企业导师可以修改已审批的考勤记录，但需要在允许的时间范围内。

### Q3: 考勤统计如何计算？
A: 考勤统计根据考勤记录自动计算，包括出勤天数、迟到次数、早退次数、缺勤次数等。

### Q4: 请假如何记录？
A: 学生可以提交请假申请，请假期间的考勤记录类型为"请假"，不计入缺勤。

### Q5: 考勤组可以删除吗？
A: 可以，但需要确认没有关联的考勤记录。

## 八、注意事项

1. **考勤规则**：创建考勤组后，需要设置合理的考勤规则。
2. **时间准确性**：考勤时间要准确，避免影响统计结果。
3. **审批及时性**：考勤记录应及时审批，避免积压。
4. **数据权限**：不同角色只能操作权限范围内的考勤记录。
5. **补签规则**：补签考勤需要说明原因，可能需要审批。

