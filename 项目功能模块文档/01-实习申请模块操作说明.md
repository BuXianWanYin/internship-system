# 实习申请模块操作说明

## 模块概述

实习申请模块是实习管理系统的核心模块之一，支持两种类型的实习申请：
- **合作企业实习**：学生申请学校合作企业的实习岗位
- **自主实习**：学生自主寻找实习单位并申请

## 一、合作企业实习申请流程

### 1.1 申请流程概览

```
学生提交申请 → 学校审核 → 企业筛选 → 面试 → 录用确认 → 学生确认上岗 → 实习中 → 实习结束 → 评价完成
```

### 1.2 详细流程说明

#### 步骤1：学生提交申请
- **操作角色**：学生
- **操作接口**：`POST /internship/apply/cooperation`
- **前置条件**：
  - 学生已登录系统
  - 存在可申请的实习岗位
  - 学生未处于其他实习中
- **操作说明**：
  1. 学生浏览实习岗位列表
  2. 选择目标岗位
  3. 填写申请信息（包括简历、申请理由等）
  4. 提交申请
- **申请状态**：`待审核 (0)`

#### 步骤2：学校审核
- **操作角色**：系统管理员、学校管理员、学院领导、班主任
- **操作接口**：`POST /internship/apply/{applyId}/audit`
- **前置条件**：
  - 申请状态为"待审核"
  - 审核人员有相应权限
- **操作说明**：
  1. 审核人员查看申请详情
  2. 审核学生资质和申请材料
  3. 选择审核结果：
     - **通过**：状态变为 `已通过 (1)`，进入企业筛选环节
     - **拒绝**：状态变为 `已拒绝 (2)`，流程结束
  4. 填写审核意见（可选）
- **状态流转**：
  - 通过：`待审核 (0)` → `已通过 (1)`
  - 拒绝：`待审核 (0)` → `已拒绝 (2)`

#### 步骤3：企业筛选
- **操作角色**：企业管理员
- **操作接口**：`POST /internship/apply/{applyId}/filter`
- **前置条件**：
  - 申请状态为"已通过"
  - 企业管理员有权限
- **操作说明**：
  企业管理员可以对申请进行以下操作：
  1. **标记感兴趣** (`action=1`)
     - 表示企业对该申请感兴趣，但尚未决定
  2. **安排面试** (`action=2`)
     - 创建面试记录
     - 申请状态保持为"已通过"
  3. **录用** (`action=3`)
     - 状态变为 `已录用 (3)`
     - 等待学生确认上岗
  4. **拒绝** (`action=4`)
     - 状态变为 `已拒绝录用 (4)`
     - 流程结束
- **状态流转**：
  - 录用：`已通过 (1)` → `已录用 (3)`
  - 拒绝录用：`已通过 (1)` → `已拒绝录用 (4)`

#### 步骤4：面试（可选）
- **操作角色**：企业管理员、企业导师
- **操作接口**：面试相关接口
- **前置条件**：
  - 企业已安排面试
- **操作说明**：
  1. 企业创建面试记录
  2. 学生确认面试时间
  3. 企业录入面试结果
  4. 根据面试结果决定是否录用

#### 步骤5：学生确认上岗
- **操作角色**：学生
- **操作接口**：`POST /internship/apply/{applyId}/confirm-onboard`
- **前置条件**：
  - 申请状态为"已录用"
  - 学生已收到录用通知
- **操作说明**：
  1. 学生查看录用信息
  2. 确认是否接受录用
  3. 确认后，申请状态保持为"已录用"，学生开始实习
- **状态流转**：`已录用 (3)` → `已录用 (3)`（状态不变，但学生确认上岗）

#### 步骤6：分配企业导师
- **操作角色**：企业管理员
- **操作接口**：`POST /internship/apply/{applyId}/assign-mentor`
- **前置条件**：
  - 学生已确认上岗
   - 企业有可用的企业导师
- **操作说明**：
  1. 企业管理员查看已录用学生列表
  2. 为学生分配企业导师
  3. 导师将负责指导该学生的实习过程

#### 步骤7：实习中
- **状态**：`已录用 (3)`
- **说明**：学生正在进行实习，可以进行以下操作：
  - 提交实习日志
  - 提交实习周报
  - 提交实习成果
  - 查看考勤记录
  - 提交反馈

#### 步骤8：实习结束
- **操作角色**：系统管理员、学校管理员、学院领导、班主任、企业管理员、企业导师
- **操作接口**：`POST /internship/apply/{applyId}/complete`
- **前置条件**：
  - 实习正在进行中
- **操作说明**：
  1. 相关人员确认实习已结束
  2. 填写结束日期和备注
  3. 状态变为 `实习结束 (7)`
- **状态流转**：`已录用 (3)` → `实习结束 (7)`

#### 步骤9：评价完成
- **说明**：当所有评价（自我评价、企业评价、学校评价）完成后，系统自动计算综合成绩
- **状态流转**：`实习结束 (7)` → `已评价 (8)`

### 1.3 其他操作

#### 取消申请
- **操作角色**：学生
- **操作接口**：`POST /internship/apply/{applyId}/cancel`
- **前置条件**：申请状态为"待审核"或"已通过"
- **状态流转**：→ `已取消 (5)`

#### 删除申请
- **操作角色**：学生
- **操作接口**：`DELETE /internship/apply/{applyId}`
- **说明**：软删除，仅学生可见

#### 解绑企业
- **操作角色**：系统管理员、学校管理员、学院领导、班主任
- **操作接口**：`POST /internship/apply/{applyId}/unbind`
- **说明**：当学生需要更换实习单位时，可以解绑当前企业
- **前置条件**：学生处于实习中

## 二、自主实习申请流程

### 2.1 申请流程概览

```
学生提交申请 → 班主任审核 → 自动确认上岗 → 实习中 → 实习结束
```

### 2.2 详细流程说明

#### 步骤1：学生提交申请
- **操作角色**：学生
- **操作接口**：`POST /internship/apply/self`
- **前置条件**：
  - 学生已登录系统
  - 学生未处于其他实习中
- **操作说明**：
  1. 学生填写自主实习申请信息：
     - 实习单位名称
     - 实习单位地址
     - 实习岗位
     - 实习开始时间
     - 实习结束时间
     - 实习单位联系人及电话
     - 申请理由
     - 相关证明材料
  2. 提交申请
- **申请状态**：`待审核 (10)`

#### 步骤2：班主任审核
- **操作角色**：班主任
- **操作接口**：`POST /internship/apply/{applyId}/audit`
- **前置条件**：
  - 申请状态为"待审核"
  - 审核人员是该学生的班主任
- **操作说明**：
  1. 班主任查看申请详情和证明材料
  2. 审核学生资质和申请材料
  3. 选择审核结果：
     - **通过**：状态变为 `实习中 (11)`，自动确认上岗
     - **拒绝**：状态变为 `审核拒绝 (12)`，流程结束
  4. 填写审核意见（可选）
- **状态流转**：
  - 通过：`待审核 (10)` → `实习中 (11)`（自动确认上岗）
  - 拒绝：`待审核 (10)` → `审核拒绝 (12)`

**注意**：自主实习审核通过后会自动确认上岗，无需学生手动确认。

#### 步骤3：实习中
- **状态**：`实习中 (11)`
- **说明**：学生正在进行实习，可以进行以下操作：
  - 提交实习日志
  - 提交实习周报
  - 提交实习成果
  - 查看考勤记录（如果有）
  - 提交反馈

#### 步骤4：实习结束
- **操作角色**：系统管理员、学校管理员、学院领导、班主任
- **操作接口**：`POST /internship/apply/{applyId}/complete`
- **前置条件**：
  - 实习正在进行中
- **操作说明**：
  1. 相关人员确认实习已结束
  2. 填写结束日期和备注
  3. 状态变为 `实习结束 (13)`
- **状态流转**：`实习中 (11)` → `实习结束 (13)`

### 2.3 其他操作

#### 取消申请
- **操作角色**：学生
- **操作接口**：`POST /internship/apply/{applyId}/cancel`
- **前置条件**：申请状态为"待审核"
- **状态流转**：→ `已取消 (14)`

## 三、状态说明

### 3.1 合作企业实习状态

| 状态码 | 状态名称 | 说明 |
|--------|---------|------|
| 0 | 待审核 | 学生已提交申请，等待学校审核 |
| 1 | 已通过 | 学校审核通过，等待企业处理 |
| 2 | 已拒绝 | 学校审核拒绝 |
| 3 | 已录用 | 企业已录用，学生需确认上岗 |
| 4 | 已拒绝录用 | 企业拒绝录用 |
| 5 | 已取消 | 学生取消申请 |
| 7 | 实习结束 | 实习已完成 |
| 8 | 已评价 | 所有评价已完成，综合成绩已计算 |

### 3.2 自主实习状态

| 状态码 | 状态名称 | 说明 |
|--------|---------|------|
| 10 | 待审核 | 学生已提交申请，等待班主任审核 |
| 11 | 实习中 | 班主任审核通过，自动确认上岗，学生开始实习 |
| 12 | 审核拒绝 | 班主任审核拒绝 |
| 13 | 实习结束 | 实习已完成 |
| 14 | 已取消 | 学生取消申请 |

## 四、权限说明

### 4.1 学生权限
- 提交合作企业实习申请
- 提交自主实习申请
- 更新申请信息
- 取消申请
- 删除申请
- 确认上岗（仅合作企业实习）
- 查看自己的申请列表和详情

### 4.2 学校管理员权限
- 审核所有学生的实习申请
- 解绑企业
- 结束实习
- 查看所有申请列表

### 4.3 学院领导权限
- 审核本学院学生的实习申请
- 解绑企业
- 结束实习
- 查看本学院申请列表

### 4.4 班主任权限
- 审核本班级学生的实习申请（包括合作企业和自主实习）
- 解绑企业
- 结束实习
- 查看本班级申请列表

### 4.5 企业管理员权限
- 筛选申请（标记感兴趣、安排面试、录用、拒绝）
- 分配企业导师
- 查看本企业的申请列表
- 结束实习

### 4.6 企业导师权限
- 查看分配给自己的学生列表
- 查看学生申请详情

## 五、API接口列表

### 5.1 申请相关接口

| 接口 | 方法 | 说明 | 权限 |
|------|------|------|------|
| `/internship/apply/cooperation` | POST | 提交合作企业实习申请 | 学生 |
| `/internship/apply/self` | POST | 提交自主实习申请 | 学生 |
| `/internship/apply` | PUT | 更新申请 | 学生 |
| `/internship/apply/page` | GET | 分页查询申请列表 | 多角色 |
| `/internship/apply/{applyId}` | GET | 查询申请详情 | 多角色 |
| `/internship/apply/{applyId}/audit` | POST | 审核申请 | 学校管理员/学院领导/班主任 |
| `/internship/apply/{applyId}/filter` | POST | 企业筛选操作 | 企业管理员 |
| `/internship/apply/{applyId}/cancel` | POST | 取消申请 | 学生 |
| `/internship/apply/{applyId}` | DELETE | 删除申请 | 学生 |
| `/internship/apply/{applyId}/assign-mentor` | POST | 分配企业导师 | 企业管理员 |
| `/internship/apply/{applyId}/confirm-onboard` | POST | 确认上岗 | 学生 |
| `/internship/apply/{applyId}/unbind` | POST | 解绑企业 | 学校管理员/学院领导/班主任 |
| `/internship/apply/current` | GET | 获取当前实习 | 学生 |
| `/internship/apply/enterprise/students` | GET | 查询企业实习学生列表 | 企业管理员/企业导师 |
| `/internship/apply/mentor/students` | GET | 查询导师指导的学生列表 | 企业导师 |
| `/internship/apply/{applyId}/complete` | POST | 结束实习 | 多角色 |
| `/internship/apply/batch-complete` | POST | 批量结束实习 | 多角色 |

## 六、常见问题

### Q1: 学生可以同时申请多个岗位吗？
A: 可以，但最终只能确认一个岗位上岗。

### Q2: 自主实习审核通过后需要学生确认吗？
A: 不需要，自主实习审核通过后会自动确认上岗。

### Q3: 如何解绑企业？
A: 由学校管理员、学院领导或班主任操作，填写解绑原因和备注即可。

### Q4: 实习结束后还能修改评价吗？
A: 需要根据系统配置和业务规则确定，一般评价提交后不能修改。

### Q5: 企业可以拒绝已通过学校审核的申请吗？
A: 可以，企业可以通过筛选操作拒绝申请。

## 七、注意事项

1. **状态流转**：申请状态必须按照规定的流程流转，不能跳跃。
2. **权限控制**：不同角色只能操作权限范围内的申请。
3. **数据权限**：班主任只能审核本班级学生的申请，学院领导只能审核本学院的申请。
4. **时间限制**：申请提交后，在审核前可以修改或取消。
5. **唯一性**：学生同一时间只能有一个有效的实习申请（已录用或实习中）。

