# 用户管理模块操作说明

## 模块概述

用户管理模块用于管理系统中的各类用户，包括学生、教师、企业、企业导师、学校管理员等。本模块提供用户的注册、审核、信息管理等功能。

## 一、用户类型说明

### 1.1 学生
- **注册方式**：批量导入或手动添加
- **主要功能**：申请实习、提交日志周报、查看评价等

### 1.2 教师
- **类型**：班主任、学院领导等
- **注册方式**：系统管理员或学校管理员添加
- **主要功能**：审核申请、管理学生、查看统计等

### 1.3 企业
- **注册方式**：企业自主注册或管理员添加
- **主要功能**：发布岗位、筛选申请、管理学生等

### 1.4 企业导师
- **注册方式**：企业管理员添加
- **主要功能**：指导学生、审批日志周报、评价学生等

### 1.5 学校管理员
- **注册方式**：系统管理员添加
- **主要功能**：管理全校实习事务、审核申请等

### 1.6 系统管理员
- **注册方式**：系统初始化时创建
- **主要功能**：系统配置、用户管理、数据管理等

## 二、学生管理

### 2.1 批量导入学生

- **操作角色**：系统管理员、学校管理员
- **操作说明**：
  1. 进入学生管理页面
  2. 点击"批量导入"
  3. 下载导入模板
  4. 填写学生信息（学号、姓名、班级等）
  5. 上传Excel文件
  6. 系统验证数据
  7. 确认导入
- **导入字段**：
  - 学号（必填）
  - 姓名（必填）
  - 班级（必填）
  - 手机号（可选）
  - 邮箱（可选）

### 2.2 手动添加学生

- **操作角色**：系统管理员、学校管理员
- **操作说明**：
  1. 进入学生管理页面
  2. 点击"新建学生"
  3. 填写学生信息
  4. 保存

### 2.3 更新学生信息

- **操作角色**：系统管理员、学校管理员、学生本人
- **操作说明**：
  1. 找到要更新的学生
  2. 修改学生信息
  3. 保存更新

### 2.4 删除学生

- **操作角色**：系统管理员、学校管理员
- **前置条件**：
  - 学生没有进行中的实习
- **操作说明**：
  1. 确认删除
  2. 执行删除操作（软删除）

## 三、教师管理

### 3.1 添加教师

- **操作角色**：系统管理员、学校管理员
- **操作说明**：
  1. 进入教师管理页面
  2. 点击"新建教师"
  3. 填写教师信息：
     - 工号
     - 姓名
     - 所属学院
     - 所属班级（如果是班主任）
     - 角色（班主任/学院领导等）
     - 联系方式
  4. 保存

### 3.2 更新教师信息

- **操作角色**：系统管理员、学校管理员、教师本人
- **操作说明**：
  1. 找到要更新的教师
  2. 修改教师信息
  3. 保存更新

### 3.3 删除教师

- **操作角色**：系统管理员、学校管理员
- **前置条件**：
  - 教师没有关联的实习管理任务
- **操作说明**：
  1. 确认删除
  2. 执行删除操作（软删除）

## 四、企业管理

### 4.1 企业注册

- **操作角色**：企业管理员
- **操作接口**：`POST /user/enterprise/register`
- **操作说明**：
  1. 进入企业注册页面
  2. 填写企业信息：
     - **企业名称**：企业的完整名称（必填）
     - **统一社会信用代码**：企业的统一社会信用代码（必填，唯一，18位）
     - **法人代表**：企业法人代表姓名（必填）
     - **企业代码**：企业代码，用于系统内部识别（必填，2-50个字符，只能包含字母、数字、下划线和横线）
     - **企业规模**：企业规模（可选）
     - **所属行业**：企业所属行业（可选）
     - **企业地址**：企业注册地址（可选）
     - **联系人**：企业联系人姓名（必填）
     - **联系电话**：联系人电话（必填，支持手机号和固定电话格式）
     - **邮箱**：企业邮箱（必填）
     - **经营范围**：企业经营范围（可选）
  3. 填写管理员账号信息：
     - **用户名**：企业管理员登录用户名（必填）
     - **密码**：企业管理员登录密码（必填）
     - **确认密码**：再次输入密码确认（必填）
  4. 确认信息无误后，提交注册
- **注册结果**：**注册成功后，企业管理员可以立即登录系统，无需等待审核**
- **注意事项**：
  - 统一社会信用代码必须唯一，不能重复注册
  - 企业信息要填写完整
  - 注册成功后即可登录系统

### 4.2 企业注册后的后续流程

- **注册成功后的步骤**：
  1. **企业管理员登录系统**：使用注册时设置的账号密码登录
  2. **提交校企合作申请**：进入"合作管理" → "合作申请"，填写合作信息并提交（见"合作管理模块"）
  3. **等待合作申请审核**：系统管理员或学校管理员审核合作申请
  4. **合作申请通过后**：系统自动建立合作关系
  5. **开始发布岗位**：进入"实习管理" → "实习岗位"，创建并发布实习岗位（见"实习岗位模块"）

**重要提示**：
- 企业注册成功后可以立即登录系统，无需审核
- 但只有提交并审核通过校企合作申请后，才能发布实习岗位
- 学生只能看到合作企业的岗位

### 4.3 添加企业

- **操作角色**：系统管理员、学校管理员
- **操作说明**：
  1. 进入企业管理页面
  2. 点击"新建企业"
  3. 填写企业信息
  4. 保存

### 4.4 更新企业信息

- **操作角色**：系统管理员、学校管理员、企业管理员
- **操作说明**：
  1. 找到要更新的企业
  2. 修改企业信息
  3. 保存更新

### 4.5 删除企业

- **操作角色**：系统管理员、学校管理员
- **前置条件**：
  - 企业没有进行中的合作关系
  - 企业没有进行中的实习申请
- **操作说明**：
  1. 确认删除
  2. 执行删除操作（软删除）

## 五、企业导师管理

### 5.1 添加企业导师

- **操作角色**：企业管理员
- **操作说明**：
  1. 进入企业导师管理页面
  2. 点击"新建导师"
  3. 填写导师信息：
     - 姓名
     - 工号（可选）
     - 部门
     - 职位
     - 联系方式
     - 邮箱
  4. 保存

### 5.2 更新企业导师信息

- **操作角色**：企业管理员、企业导师本人
- **操作说明**：
  1. 找到要更新的导师
  2. 修改导师信息
  3. 保存更新

### 5.3 删除企业导师

- **操作角色**：企业管理员
- **前置条件**：
  - 导师没有正在指导的学生
- **操作说明**：
  1. 确认删除
  2. 执行删除操作（软删除）

## 六、学校管理员管理

### 6.1 添加学校管理员

- **操作角色**：系统管理员
- **操作说明**：
  1. 进入学校管理员管理页面
  2. 点击"新建管理员"
  3. 填写管理员信息
  4. 保存

### 6.2 更新学校管理员信息

- **操作角色**：系统管理员、学校管理员本人
- **操作说明**：
  1. 找到要更新的管理员
  2. 修改管理员信息
  3. 保存更新

### 6.3 删除学校管理员

- **操作角色**：系统管理员
- **操作说明**：
  1. 确认删除
  2. 执行删除操作（软删除）

## 七、用户状态说明

| 状态码 | 状态名称 | 说明 |
|--------|---------|------|
| 0 | 禁用 | 用户账号已禁用，无法登录系统 |
| 1 | 启用 | 用户账号正常，可以登录系统 |

**说明**：
- 用户状态通过 `status` 字段控制，只有"启用"和"禁用"两种状态
- 删除用户使用逻辑删除，通过 `delete_flag` 字段控制（0：未删除，1：已删除）
- 企业、实习计划、实习岗位等实体的审核状态使用 `audit_status` 字段（0：待审核，1：已通过，2：已拒绝）

## 八、权限说明

### 8.1 系统管理员
- 管理所有用户
- 配置系统权限

### 8.2 学校管理员
- 管理学生、教师
- 管理企业（部分权限）

### 8.3 企业管理员
- 管理本企业的企业导师
- 更新本企业信息

### 8.4 学生/教师/企业导师
- 更新个人信息
- 修改密码

## 九、API接口列表

### 9.1 学生接口

| 接口 | 方法 | 说明 | 权限 |
|------|------|------|------|
| `/user/student` | POST | 添加学生 | 系统管理员/学校管理员 |
| `/user/student` | PUT | 更新学生 | 系统管理员/学校管理员/学生本人 |
| `/user/student/{studentId}` | GET | 查询学生详情 | 多角色 |
| `/user/student/page` | GET | 分页查询学生列表 | 多角色 |
| `/user/student/import` | POST | 批量导入学生 | 系统管理员/学校管理员 |
| `/user/student/{studentId}` | DELETE | 删除学生 | 系统管理员/学校管理员 |

### 9.2 教师接口

| 接口 | 方法 | 说明 | 权限 |
|------|------|------|------|
| `/user/teacher` | POST | 添加教师 | 系统管理员/学校管理员 |
| `/user/teacher` | PUT | 更新教师 | 系统管理员/学校管理员/教师本人 |
| `/user/teacher/{teacherId}` | GET | 查询教师详情 | 多角色 |
| `/user/teacher/page` | GET | 分页查询教师列表 | 多角色 |
| `/user/teacher/{teacherId}` | DELETE | 删除教师 | 系统管理员/学校管理员 |

### 9.3 企业接口

| 接口 | 方法 | 说明 | 权限 |
|------|------|------|------|
| `/user/enterprise/register` | POST | 企业注册 | 企业管理员 |
| `/user/enterprise` | POST | 添加企业 | 系统管理员/学校管理员 |
| `/user/enterprise` | PUT | 更新企业 | 系统管理员/学校管理员/企业管理员 |
| `/user/enterprise/{enterpriseId}` | GET | 查询企业详情 | 多角色 |
| `/user/enterprise/page` | GET | 分页查询企业列表 | 多角色 |
| `/user/enterprise/{enterpriseId}/audit` | POST | 审核企业（此接口存在但企业注册无需审核） | 系统管理员/学校管理员 |
| `/user/enterprise/{enterpriseId}` | DELETE | 删除企业 | 系统管理员/学校管理员 |

### 9.4 企业导师接口

| 接口 | 方法 | 说明 | 权限 |
|------|------|------|------|
| `/user/enterprise-mentor` | POST | 添加企业导师 | 企业管理员 |
| `/user/enterprise-mentor` | PUT | 更新企业导师 | 企业管理员/企业导师本人 |
| `/user/enterprise-mentor/{mentorId}` | GET | 查询企业导师详情 | 多角色 |
| `/user/enterprise-mentor/page` | GET | 分页查询企业导师列表 | 多角色 |
| `/user/enterprise-mentor/{mentorId}` | DELETE | 删除企业导师 | 企业管理员 |

### 9.5 认证接口

| 接口 | 方法 | 说明 | 权限 |
|------|------|------|------|
| `/auth/login` | POST | 用户登录 | 所有用户 |
| `/auth/logout` | POST | 用户登出 | 所有用户 |
| `/auth/register` | POST | 用户注册 | 企业管理员 |
| `/user/info` | GET | 获取当前用户信息 | 所有用户 |
| `/user/password` | PUT | 修改密码 | 所有用户 |

## 十、常见问题

### Q1: 学生可以自己注册吗？
A: 一般不可以，学生由系统管理员或学校管理员批量导入或手动添加。

### Q2: 企业注册后可以立即登录吗？
A: 是的。企业注册成功后，企业管理员可以立即使用注册时设置的账号密码登录系统，无需等待审核。

### Q2-1: 企业注册成功后，下一步要做什么？
A: 企业注册成功后，企业管理员可以立即登录系统。接下来需要：
1. **提交校企合作申请**：进入"合作管理" → "合作申请"，填写合作信息并提交
2. **等待合作申请审核**：系统管理员或学校管理员审核合作申请
3. **合作申请通过后**：系统自动建立合作关系
4. **开始发布岗位**：进入"实习管理" → "实习岗位"，创建并发布实习岗位

### Q2-2: 企业注册后可以直接发布岗位吗？
A: 不可以。企业注册成功后可以登录系统，但还不能发布岗位。必须先与学校建立合作关系，才能发布岗位。具体流程：
1. 企业注册成功 → 可以立即登录系统
2. 提交校企合作申请 → 等待审核
3. 合作申请审核通过 → 自动建立合作关系
4. 建立合作关系后 → 可以创建和发布岗位

### Q3: 可以批量导入教师吗？
A: 可以，类似学生批量导入，需要提供Excel模板。

### Q4: 删除用户后数据会怎样？
A: 删除用户是软删除，用户数据会保留，但账号不能登录。

### Q5: 如何重置用户密码？
A: 系统管理员或学校管理员可以重置用户密码，用户也可以自己通过忘记密码功能重置。

## 十一、注意事项

1. **数据准确性**：用户信息要准确，特别是学号、工号等唯一标识。
2. **权限控制**：不同角色只能操作权限范围内的用户。
3. **批量导入**：批量导入前要验证数据格式和完整性。
4. **账号安全**：用户应定期修改密码，确保账号安全。
5. **删除谨慎**：删除用户前要确认没有关联的业务数据。

