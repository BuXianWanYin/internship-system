# 实习岗位模块操作说明

## 模块概述

实习岗位模块用于管理企业的实习岗位信息，包括岗位的创建、审核、发布等流程。岗位是学生申请实习的基础。

## 一、实习岗位状态说明

| 状态码 | 状态名称 | 说明 |
|--------|---------|------|
| 0 | 待审核 | 岗位已创建，等待审核 |
| 1 | 已通过 | 岗位审核通过（此状态通常不会出现，审核通过后直接变为已发布） |
| 2 | 已拒绝 | 岗位审核被拒绝 |
| 3 | 已发布 | 岗位已发布，学生可以申请 |
| 4 | 已关闭 | 岗位已关闭（下架），不再接受申请 |

## 二、操作流程

### 2.1 前置条件：企业注册和合作建立

在创建实习岗位之前，企业必须完成以下步骤：

1. **企业注册**
   - 企业管理员完成企业注册
   - **注册成功后，企业管理员可以立即登录系统，无需等待审核**

2. **建立校企合作关系**
   - 企业管理员登录系统后，提交校企合作申请
   - 系统管理员/学校管理员审核合作申请
   - 审核通过后，系统自动建立合作关系

**重要提示**：
- **企业注册成功后即可登录系统，无需审核**
- **只有建立了合作关系后，企业才能创建和发布实习岗位**
- **没有合作关系的企业，无法创建岗位或岗位无法被学生看到**

### 2.2 创建实习岗位

#### 步骤1：创建岗位
- **操作角色**：企业管理员（已建立合作关系）
- **前置条件**：
  - 企业已与学校建立合作关系
  - 存在已发布的实习计划（岗位需要关联实习计划）
- **操作接口**：`POST /internship/post`
- **操作说明**：
  1. 登录系统后，进入"实习管理" → "实习岗位"页面
  2. 点击"新建岗位"按钮
  3. 填写岗位信息：
     - **岗位名称**：岗位的完整名称（必填）
     - **岗位编号**：企业内部岗位编号（必填，企业内唯一）
     - **所属实习计划**：选择已发布的实习计划（必填）
     - **岗位类型**：选择岗位类型（可选）
     - **岗位描述**：详细描述岗位职责和工作内容（可选）
     - **岗位要求**：描述对学生的要求（学历、技能、专业等）（可选）
     - **招聘人数**：计划招聘的学生人数（可选，默认1）
     - **工作地点**：实习工作地点（必填）
     - **薪资待遇**：实习薪资或补贴（可选）
     - **实习开始时间**：岗位实习开始日期（可选）
     - **实习结束时间**：岗位实习结束日期（可选）
     - **其他相关信息**：其他需要说明的信息
  4. 确认信息无误后，点击"保存"按钮
  5. 岗位创建成功，状态自动设置为"待审核"
- **状态**：`待审核 (0)`
- **注意事项**：
  - 岗位必须关联一个已发布的实习计划
  - 实习开始时间不能早于当前日期
  - 实习结束时间不能早于开始时间
  - 招聘人数必须大于0（如果填写）
  - 岗位创建后立即进入待审核状态，无需手动提交审核

#### 步骤2：审核岗位
- **操作角色**：系统管理员、学校管理员
- **操作接口**：`POST /internship/post/{postId}/audit`
- **前置条件**：
  - 岗位状态为"待审核"
  - 审核人员有相应权限
- **操作说明**：
  1. 审核人员查看岗位详情
  2. 审核岗位信息是否合理
  3. 选择审核结果：
     - **通过**：状态直接变为 `已发布 (3)`，系统自动记录发布时间
     - **拒绝**：状态变为 `已拒绝 (2)`，需要填写拒绝原因
  4. 填写审核意见
- **状态流转**：
  - 通过：`待审核 (0)` → `已发布 (3)`（审核通过时自动完成，无需手动发布）
  - 拒绝：`待审核 (0)` → `已拒绝 (2)`

**重要提示**：
- 岗位审核通过后立即变为"已发布"状态，无需手动发布
- 学生可以立即查看并申请该岗位
- 审核通过后不会出现"已通过"这个中间状态

### 2.3 修改岗位

- **操作角色**：企业管理员
- **操作接口**：`PUT /internship/post`
- **前置条件**：
  - 岗位状态为"待审核"或"已拒绝"
  - 已发布或已关闭的岗位不允许修改
- **操作说明**：
  1. 编辑岗位信息
  2. 保存修改
  3. 如果状态为"已拒绝"，修改后状态仍为"已拒绝"，需要等待重新审核

### 2.4 发布岗位（手动）

- **操作角色**：企业管理员
- **操作接口**：`POST /internship/post/{postId}/publish`
- **前置条件**：
  - 岗位状态为"已通过"（此状态通常不会出现）
- **操作说明**：
  1. 确认岗位信息
  2. 执行发布操作
  3. 状态变为"已发布"
- **状态流转**：`已通过 (1)` → `已发布 (3)`
- **注意**：此操作通常不需要，因为审核通过后会自动发布

### 2.5 关闭岗位（下架）

- **操作角色**：企业管理员
- **操作接口**：`POST /internship/post/{postId}/close`
- **前置条件**：
  - 岗位状态为"已发布"
- **操作说明**：
  1. 确认关闭原因
  2. 执行关闭操作
  3. 状态变为"已关闭"
  4. 学生不能再申请该岗位，但已申请的记录保留
- **状态流转**：`已发布 (3)` → `已关闭 (4)`

### 2.6 删除岗位

- **操作角色**：企业管理员
- **操作接口**：`DELETE /internship/post/{postId}`
- **前置条件**：
  - 岗位状态为"待审核"或"已拒绝"
  - 岗位未被使用（没有关联的申请）
- **操作说明**：
  1. 确认删除
  2. 执行删除操作（软删除）

## 三、权限说明

### 4.1 企业管理员
- 创建、编辑、删除本企业的岗位
- 提交岗位审核
- 下架本企业的岗位
- 查看本企业的岗位列表

### 4.2 系统管理员
- 审核所有岗位
- 发布所有岗位
- 下架所有岗位
- 查看所有岗位

### 4.3 学校管理员
- 审核所有岗位
- 发布所有岗位
- 下架所有岗位
- 查看所有岗位

### 4.4 学生
- 查看已发布的岗位
- 申请岗位

## 四、API接口列表

| 接口 | 方法 | 说明 | 权限 |
|------|------|------|------|
| `/internship/post` | POST | 创建实习岗位 | 企业管理员 |
| `/internship/post` | PUT | 更新实习岗位 | 企业管理员 |
| `/internship/post/{postId}` | GET | 查询岗位详情 | 多角色 |
| `/internship/post/page` | GET | 分页查询岗位列表 | 多角色 |
| `/internship/post/{postId}` | DELETE | 删除岗位 | 企业管理员/系统管理员/学校管理员 |
| `/internship/post/{postId}/audit` | POST | 审核岗位 | 系统管理员/学校管理员 |
| `/internship/post/{postId}/publish` | POST | 发布岗位（手动，通常不需要） | 企业管理员 |
| `/internship/post/{postId}/close` | POST | 关闭岗位（下架） | 企业管理员 |
| `/internship/post/{postId}/applications` | GET | 查询岗位申请情况 | 企业管理员 |
| `/internship/post/export` | GET | 导出岗位列表 | 多角色 |

## 五、常见问题

### Q1: 已发布的岗位可以修改吗？
A: 已发布的岗位一般不能修改，如需修改需要先下架，修改后重新审核发布。

### Q2: 岗位审核被拒绝后怎么办？
A: 可以修改岗位内容，然后重新提交审核。

### Q3: 岗位可以删除吗？
A: 只有草稿状态或已拒绝状态的岗位可以删除，且不能有关联的申请记录。

### Q4: 学生可以看到哪些岗位？
A: 学生可以看到的岗位需要满足以下所有条件：
1. **岗位状态为"已发布"**：只有审核通过并已发布的岗位
2. **企业已与学校建立合作关系**：只有合作企业的岗位
3. **关联的实习计划已发布**：岗位必须关联一个已发布的实习计划
4. **实习时间在有效期内**：岗位的实习开始时间不能早于当前日期，实习结束时间不能早于当前日期
5. **招聘人数未满**：如果岗位设置了招聘人数，已录用人数未达到招聘人数上限
6. **组织架构匹配**：岗位关联的实习计划必须匹配学生的学校、学院、专业（如果计划有这些限制）

**学生查看岗位的流程**：
1. 学生登录系统
2. 进入"实习申请" → "岗位列表"页面
3. 系统自动过滤，只显示满足上述条件的岗位
4. 学生可以搜索、筛选岗位
5. 点击岗位详情，查看完整信息
6. 选择心仪的岗位，提交实习申请

### Q5: 岗位下架后已申请的记录会怎样？
A: 岗位下架后，学生不能再申请，但已申请的记录会保留，可以继续走审核流程。

### Q6: 岗位招聘人数已满后还能申请吗？
A: 需要根据系统配置确定，一般招聘人数已满后不能再申请。

## 六、岗位可见性说明

### 6.1 学生端岗位可见性规则

学生能够看到并申请的岗位必须同时满足以下条件：

1. **企业合作关系**
   - 企业必须已与学校建立合作关系
   - 合作关系状态为"进行中"
   - 合作关系未过期（合作结束时间未到）

2. **岗位状态**
   - 岗位状态为"已发布"（审核通过后自动发布）
   - 岗位未被删除

3. **实习计划**
   - 岗位关联的实习计划状态为"已发布"
   - 实习计划未过期（计划结束时间未到）
   - 实习计划匹配学生的组织架构（学校、学院、专业）

4. **时间有效性**
   - 岗位的实习开始时间不早于当前日期
   - 岗位的实习结束时间不早于当前日期

5. **招聘人数**
   - 如果岗位设置了招聘人数，已录用人数未达到上限
   - 如果岗位未设置招聘人数，则不受此限制

### 6.2 岗位发布后的可见流程

```
岗位审核通过
    ↓
自动发布（状态变为"已发布"）
    ↓
系统检查可见性条件
    ↓
满足条件 → 学生可以看到
不满足条件 → 学生看不到
```

### 6.3 常见可见性问题

**问题1：企业已发布岗位，但学生看不到**
- **原因1**：企业未与学校建立合作关系
  - **解决方法**：企业需要先登录系统，提交合作申请，学校审核通过后建立合作关系
- **原因2**：岗位关联的实习计划未发布
  - **解决方法**：等待学校发布实习计划
- **原因3**：岗位的实习时间已过期
  - **解决方法**：修改岗位的实习时间，重新提交审核
- **原因4**：岗位招聘人数已满
  - **解决方法**：增加招聘人数或等待有学生取消申请

**问题2：岗位审核通过后，学生立即可以看到吗？**
- **答案**：是的，岗位审核通过后立即变为"已发布"状态，如果满足所有可见性条件，学生可以立即看到。

## 七、注意事项

1. **前置条件**：企业必须先完成注册，并建立校企合作关系，才能创建和发布岗位。
2. **创建即审核**：岗位创建后立即进入待审核状态，无需手动提交审核。
3. **关联计划**：岗位必须关联一个已发布的实习计划，且计划必须匹配学生的组织架构。
4. **时间设置**：实习开始时间和结束时间要合理，不能早于当前时间。
5. **审核流程**：岗位必须经过审核才能发布，审核通过后自动变为已发布状态，无需手动发布。
5. **数据权限**：企业管理员只能操作本企业的岗位。
6. **关联数据**：删除岗位前需确认没有关联的申请记录。
7. **招聘人数**：设置合理的招聘人数，避免超员。
8. **合作关系**：确保合作关系在有效期内，过期后需要续签。

