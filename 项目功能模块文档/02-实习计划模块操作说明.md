# 实习计划模块操作说明

## 模块概述

实习计划模块用于管理学校的实习计划，包括计划的创建、审核、发布等流程。实习计划是实习管理的基础，只有已发布的实习计划才能被学生申请。

## 一、实习计划状态说明

| 状态码 | 状态名称 | 说明 |
|--------|---------|------|
| 0 | 草稿 | 计划正在编辑中，未提交审核 |
| 1 | 待审核 | 计划已提交，等待审核 |
| 2 | 已通过 | 计划审核通过，但未发布 |
| 3 | 已拒绝 | 计划审核被拒绝 |
| 4 | 已发布 | 计划已发布，学生可以申请 |

## 二、操作流程

### 2.1 创建实习计划

#### 步骤1：创建草稿
- **操作角色**：系统管理员、学校管理员、学院领导
- **操作说明**：
  1. 进入实习计划管理页面
  2. 点击"新建计划"
  3. 填写计划信息：
     - 计划名称
     - 计划类型（全校计划/学院计划/专业计划/班级计划）
     - 适用范围（根据计划类型选择）
     - 实习开始时间
     - 实习结束时间
     - 实习要求
     - 其他相关信息
  4. 保存为草稿
- **状态**：`草稿 (0)`

#### 步骤2：提交审核
- **操作角色**：系统管理员、学校管理员、学院领导
- **操作接口**：`POST /internship/plan/{planId}/submit`
- **前置条件**：
  - 计划状态为"草稿"
  - 计划信息完整
- **操作说明**：
  1. 确认计划信息无误
  2. 提交审核
  3. 状态变为"待审核"
- **状态流转**：`草稿 (0)` → `待审核 (1)`

#### 步骤3：审核计划
- **操作角色**：系统管理员、学校管理员（根据计划类型和权限）
- **操作接口**：`POST /internship/plan/{planId}/audit`
- **前置条件**：
  - 计划状态为"待审核"
  - 审核人员有相应权限
- **操作说明**：
  1. 审核人员查看计划详情
  2. 审核计划内容是否合理
  3. 选择审核结果：
     - **通过**：状态变为 `已通过 (2)`
     - **拒绝**：状态变为 `已拒绝 (3)`，需要填写拒绝原因
  4. 填写审核意见
- **状态流转**：
  - 通过：`待审核 (1)` → `已通过 (2)`
  - 拒绝：`待审核 (1)` → `已拒绝 (3)`

#### 步骤4：发布计划
- **操作角色**：系统管理员、学校管理员
- **操作接口**：`POST /internship/plan/{planId}/publish`
- **前置条件**：
  - 计划状态为"已通过"
- **操作说明**：
  1. 确认计划信息
  2. 发布计划
  3. 状态变为"已发布"
  4. 学生可以查看并申请该计划下的岗位
- **状态流转**：`已通过 (2)` → `已发布 (4)`

### 2.2 修改计划

- **操作角色**：计划创建者（系统管理员、学校管理员、学院领导）
- **前置条件**：
  - 计划状态为"草稿"或"已拒绝"
- **操作说明**：
  1. 编辑计划信息
  2. 保存修改
  3. 如果状态为"已拒绝"，修改后可以重新提交审核

### 2.3 删除计划

- **操作角色**：系统管理员、学校管理员
- **前置条件**：
  - 计划状态为"草稿"或"已拒绝"
  - 计划未被使用（没有关联的申请）
- **操作说明**：
  1. 确认删除
  2. 执行删除操作（软删除）

## 三、计划类型说明

### 3.1 全校计划
- **适用范围**：全校所有学生
- **创建权限**：系统管理员、学校管理员
- **说明**：适用于全校性的实习活动

### 3.2 学院计划
- **适用范围**：指定学院的所有学生
- **创建权限**：系统管理员、学校管理员、学院领导
- **说明**：适用于学院级别的实习活动

### 3.3 专业计划
- **适用范围**：指定专业的所有学生
- **创建权限**：系统管理员、学校管理员、学院领导
- **说明**：适用于专业级别的实习活动

### 3.4 班级计划
- **适用范围**：指定班级的所有学生
- **创建权限**：系统管理员、学校管理员、学院领导、班主任
- **说明**：适用于班级级别的实习活动

## 四、权限说明

### 4.1 系统管理员
- 创建、编辑、删除所有计划
- 审核所有计划
- 发布所有计划
- 查看所有计划

### 4.2 学校管理员
- 创建、编辑、删除全校计划
- 审核所有计划
- 发布所有计划
- 查看所有计划

### 4.3 学院领导
- 创建、编辑、删除本学院的计划
- 审核本学院的计划（根据权限）
- 查看本学院的计划

### 4.4 班主任
- 创建、编辑、删除本班级的计划
- 查看本班级的计划

### 4.5 学生
- 查看已发布的计划
- 申请计划下的岗位

## 五、API接口列表

| 接口 | 方法 | 说明 | 权限 |
|------|------|------|------|
| `/internship/plan` | POST | 创建实习计划 | 系统管理员/学校管理员/学院领导 |
| `/internship/plan` | PUT | 更新实习计划 | 系统管理员/学校管理员/学院领导 |
| `/internship/plan/{planId}` | GET | 查询计划详情 | 多角色 |
| `/internship/plan/page` | GET | 分页查询计划列表 | 多角色 |
| `/internship/plan/{planId}` | DELETE | 删除计划 | 系统管理员/学校管理员 |
| `/internship/plan/{planId}/submit` | POST | 提交审核 | 系统管理员/学校管理员/学院领导 |
| `/internship/plan/{planId}/audit` | POST | 审核计划 | 系统管理员/学校管理员 |
| `/internship/plan/{planId}/publish` | POST | 发布计划 | 系统管理员/学校管理员 |

## 六、常见问题

### Q1: 已发布的计划可以修改吗？
A: 已发布的计划一般不能修改，如需修改需要先撤销发布，修改后重新审核发布。

### Q2: 计划审核被拒绝后怎么办？
A: 可以修改计划内容，然后重新提交审核。

### Q3: 计划可以删除吗？
A: 只有草稿状态或已拒绝状态的计划可以删除，且不能有关联的申请记录。

### Q4: 学生可以看到哪些计划？
A: 学生只能看到已发布的计划，且只能看到自己适用范围内的计划。

### Q5: 计划发布后立即生效吗？
A: 是的，计划发布后，学生可以立即查看并申请该计划下的岗位。

## 七、注意事项

1. **计划范围**：创建计划时需正确选择计划类型和适用范围。
2. **时间设置**：实习开始时间和结束时间要合理，不能早于当前时间。
3. **审核流程**：计划必须经过审核才能发布。
4. **数据权限**：不同角色只能操作权限范围内的计划。
5. **关联数据**：删除计划前需确认没有关联的申请记录。

